<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>인사이드잡 - 취업 멘토링 플랫폼</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React 18 CDN (Development) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Meta Tags for SEO -->
    <meta name="description" content="현직자와 구직자를 연결하는 취업 멘토링 플랫폼. 취업경쟁력 진단부터 1:1 멘토링까지.">
    <meta name="keywords" content="취업멘토링, 현직자상담, 취업경쟁력진단, 커리어코칭, 인사이드잡">
    <meta name="author" content="(주)오픈커넥트">
    
    <!-- Open Graph -->
    <meta property="og:title" content="인사이드잡 - 취업 멘토링 플랫폼">
    <meta property="og:description" content="현직자와 구직자를 연결하는 실무 중심 커리어 상담 서비스">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://knwwhr.github.io/insidejob">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎯</text></svg>">
    
    <!-- Custom Styles -->
    <style>
        /* 인사이드잡 전용 스타일 */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            font-size: 18px;
            line-height: 1.6;
            background-color: #f8fafc;
            margin: 0;
            padding: 0;
        }

        /* 카드 스타일 */
        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            padding: 24px;
            margin-bottom: 16px;
        }

        /* 인사이드잡 브랜드 컬러 */
        .btn-primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            display: inline-block;
            text-decoration: none;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 16px rgba(16, 185, 129, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 12px rgba(245, 158, 11, 0.3);
        }

        /* 로딩 애니메이션 */
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #10b981;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 성능 최적화 */
        .loading-spinner {
            will-change: transform;
        }

        .card {
            will-change: box-shadow;
        }

        /* 지연 로딩 최적화 */
        .lazy-load {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .lazy-load.loaded {
            opacity: 1;
        }

        /* 반응형 최적화 */
        @media (max-width: 768px) {
            body { font-size: 16px; }
            .card { padding: 16px; margin-bottom: 12px; }
            .btn-primary { padding: 14px 20px; font-size: 14px; }
            
            /* 모바일 성능 최적화 */
            .hover\:shadow-lg:hover { transform: none; }
            .transition-all { transition: none; }
        }

        /* 프리로드 최적화 */
        .preload-none {
            content-visibility: auto;
            contain: layout style paint;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/javascript">
        // Supabase 설정
        const SUPABASE_URL = 'https://upsedttmnulbmarhawyj.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVwc2VkdHRtbnVsYm1hcmhhd3lqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0NDk5MzIsImV4cCI6MjA3MjAyNTkzMn0.j7QuXCFfIytrBvCsIQl0bt9EuVYScIzZWGTR3tVZdUs';
        
        const { createClient } = supabase;
        const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // 로그인/회원가입 모달 (플랜비 스타일)
        const renderAuthModal = () => {
            const [email, setEmail] = React.useState('');
            const [password, setPassword] = React.useState('');
            const [nickname, setNickname] = React.useState('');
            const [isLoading, setIsLoading] = React.useState(false);
            
            return React.createElement('div', {
                className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 px-4'
            }, [
                React.createElement('div', {
                    key: 'modal-content',
                    className: 'bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl relative'
                }, [
                    // 닫기 버튼
                    React.createElement('button', {
                        key: 'close-btn',
                        className: 'absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl font-bold',
                        onClick: () => setCurrentView('home')
                    }, '×'),
                    
                    // 헤더
                    React.createElement('div', {
                        key: 'modal-header',
                        className: 'text-center mb-6'
                    }, [
                        React.createElement('h2', {
                            key: 'modal-title',
                            className: 'text-2xl font-bold text-gray-800 mb-2'
                        }, authMode === 'login' ? '🔐 로그인' : '✨ 회원가입'),
                        React.createElement('p', {
                            key: 'modal-subtitle',
                            className: 'text-gray-600'
                        }, authMode === 'login' ? '인사이드잡에 로그인하세요' : '인사이드잡에 가입하고 모든 서비스를 이용하세요')
                    ]),
                    
                    // 폼
                    React.createElement('form', {
                        key: 'auth-form',
                        className: 'space-y-4',
                        onSubmit: (e) => {
                            e.preventDefault();
                            if (authMode === 'login') {
                                handleLogin(email, password);
                            } else {
                                handleSignUp(email, password, nickname);
                            }
                        }
                    }, [
                        // 닉네임 (회원가입 시에만)
                        authMode === 'signup' ? React.createElement('div', {
                            key: 'nickname-field'
                        }, [
                            React.createElement('label', {
                                key: 'nickname-label',
                                className: 'block text-sm font-medium text-gray-700 mb-2'
                            }, '닉네임'),
                            React.createElement('input', {
                                key: 'nickname-input',
                                type: 'text',
                                value: nickname,
                                onChange: (e) => setNickname(e.target.value),
                                className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-base',
                                placeholder: '닉네임을 입력하세요',
                                required: true
                            })
                        ]) : null,
                        
                        // 이메일
                        React.createElement('div', {
                            key: 'email-field'
                        }, [
                            React.createElement('label', {
                                key: 'email-label',
                                className: 'block text-sm font-medium text-gray-700 mb-2'
                            }, '이메일'),
                            React.createElement('input', {
                                key: 'email-input',
                                type: 'email',
                                value: email,
                                onChange: (e) => setEmail(e.target.value),
                                className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-base',
                                placeholder: 'email@example.com',
                                required: true
                            })
                        ]),
                        
                        // 비밀번호
                        React.createElement('div', {
                            key: 'password-field'
                        }, [
                            React.createElement('label', {
                                key: 'password-label',
                                className: 'block text-sm font-medium text-gray-700 mb-2'
                            }, '비밀번호'),
                            React.createElement('input', {
                                key: 'password-input',
                                type: 'password',
                                value: password,
                                onChange: (e) => setPassword(e.target.value),
                                className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-base',
                                placeholder: '비밀번호를 입력하세요',
                                required: true,
                                minLength: 6
                            })
                        ]),
                        
                        // 제출 버튼
                        React.createElement('button', {
                            key: 'submit-btn',
                            type: 'submit',
                            className: 'w-full btn-primary py-3 mt-6',
                            disabled: isLoading
                        }, isLoading ? '처리중...' : (authMode === 'login' ? '로그인' : '회원가입')),
                        
                        // 모드 전환
                        React.createElement('div', {
                            key: 'mode-switch',
                            className: 'text-center mt-4'
                        }, [
                            React.createElement('span', {
                                key: 'switch-text',
                                className: 'text-gray-600 text-sm'
                            }, authMode === 'login' ? '아직 계정이 없으신가요? ' : '이미 계정이 있으신가요? '),
                            React.createElement('button', {
                                key: 'switch-btn',
                                type: 'button',
                                className: 'text-green-600 hover:text-green-700 font-semibold text-sm',
                                onClick: () => setAuthMode(authMode === 'login' ? 'signup' : 'login')
                            }, authMode === 'login' ? '회원가입하기' : '로그인하기')
                        ])
                    ])
                ])
            ]);
        };

        // 커뮤니티 화면 렌더링
        const renderCommunityView = () => {
            const [posts, setPosts] = React.useState([]);
            const [isLoading, setIsLoading] = React.useState(true);
            const [showPostForm, setShowPostForm] = React.useState(false);
            const [newPost, setNewPost] = React.useState({ title: '', content: '' });

            // 게시글 목록 불러오기
            React.useEffect(() => {
                const fetchPosts = async () => {
                    try {
                        const { data, error } = await supabaseClient
                            .from('job_seeker_posts')
                            .select(`
                                *,
                                user_profiles!inner(nickname)
                            `)
                            .order('created_at', { ascending: false })
                            .limit(20);

                        if (error) throw error;
                        setPosts(data || []);
                    } catch (error) {
                        console.error('Posts fetch error:', error);
                        // 목업 데이터 표시
                        setPosts([
                            { id: 1, title: '취업 준비 꿀팁 공유합니다', content: '안녕하세요! 최근에 면접 합격한 경험을...', author: '취업성공러', created_at: '2025-08-29T10:00:00', views: 45 },
                            { id: 2, title: '개발자 포트폴리오 피드백 부탁드려요', content: 'React로 만든 프로젝트인데 어떤지...', author: '신입개발자', created_at: '2025-08-29T09:30:00', views: 32 },
                            { id: 3, title: '대기업 vs 스타트업 고민됩니다', content: '두 곳 다 합격했는데...', author: '고민많은청년', created_at: '2025-08-29T09:00:00', views: 78 }
                        ]);
                    } finally {
                        setIsLoading(false);
                    }
                };

                fetchPosts();
            }, []);

            // 새 게시글 작성
            const handleCreatePost = async () => {
                if (!newPost.title.trim() || !newPost.content.trim()) {
                    alert('제목과 내용을 모두 입력해주세요.');
                    return;
                }

                try {
                    const { error } = await supabaseClient
                        .from('job_seeker_posts')
                        .insert({
                            user_id: currentUser.id,
                            title: newPost.title,
                            content: newPost.content,
                            category: 'general'
                        });

                    if (error) throw error;
                    
                    alert('게시글이 작성되었습니다!');
                    setNewPost({ title: '', content: '' });
                    setShowPostForm(false);
                    // 목록 새로고침 로직 추가 필요
                } catch (error) {
                    console.error('Post creation error:', error);
                    alert('게시글 작성 중 오류가 발생했습니다.');
                }
            };

            return React.createElement('div', {
                className: 'min-h-screen bg-gradient-to-br from-green-50 to-blue-50'
            }, [
                // 헤더
                React.createElement('header', {
                    key: 'community-header',
                    className: 'bg-white shadow-sm border-b'
                }, React.createElement('div', {
                    className: 'max-w-7xl mx-auto px-4 py-6'
                }, [
                    React.createElement('div', {
                        key: 'header-content',
                        className: 'flex items-center justify-between'
                    }, [
                        React.createElement('button', {
                            key: 'back-btn',
                            className: 'text-gray-600 hover:text-gray-800 text-lg',
                            onClick: () => setCurrentView('home')
                        }, '← 홈으로'),
                        React.createElement('h1', {
                            key: 'community-title',
                            className: 'text-2xl font-bold text-gray-900'
                        }, '💬 구직자 커뮤니티'),
                        React.createElement('button', {
                            key: 'write-btn',
                            className: 'btn-primary px-4 py-2',
                            onClick: () => setShowPostForm(!showPostForm)
                        }, showPostForm ? '취소' : '✏️ 글쓰기')
                    ])
                ])),

                // 메인 컨텐츠
                React.createElement('main', {
                    key: 'community-main',
                    className: 'max-w-4xl mx-auto px-4 py-8'
                }, [
                    // 글쓰기 폼
                    showPostForm ? React.createElement('div', {
                        key: 'post-form',
                        className: 'card mb-6'
                    }, [
                        React.createElement('h3', {
                            key: 'form-title',
                            className: 'text-xl font-bold text-gray-800 mb-4'
                        }, '새 게시글 작성'),
                        React.createElement('div', {
                            key: 'form-fields',
                            className: 'space-y-4'
                        }, [
                            React.createElement('input', {
                                key: 'title-input',
                                type: 'text',
                                placeholder: '제목을 입력하세요',
                                value: newPost.title,
                                onChange: (e) => setNewPost(prev => ({ ...prev, title: e.target.value })),
                                className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base'
                            }),
                            React.createElement('textarea', {
                                key: 'content-input',
                                placeholder: '내용을 입력하세요',
                                rows: 6,
                                value: newPost.content,
                                onChange: (e) => setNewPost(prev => ({ ...prev, content: e.target.value })),
                                className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base resize-none'
                            }),
                            React.createElement('div', {
                                key: 'form-actions',
                                className: 'flex justify-end space-x-3'
                            }, [
                                React.createElement('button', {
                                    key: 'cancel-btn',
                                    className: 'px-6 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50',
                                    onClick: () => setShowPostForm(false)
                                }, '취소'),
                                React.createElement('button', {
                                    key: 'submit-btn',
                                    className: 'btn-primary px-6 py-2',
                                    onClick: handleCreatePost
                                }, '작성완료')
                            ])
                        ])
                    ]) : null,

                    // 게시글 목록
                    React.createElement('div', {
                        key: 'posts-container',
                        className: 'space-y-4'
                    }, [
                        React.createElement('h2', {
                            key: 'posts-title',
                            className: 'text-xl font-bold text-gray-800 mb-4'
                        }, '최신 게시글'),

                        isLoading ? 
                            React.createElement('div', {
                                key: 'loading',
                                className: 'text-center py-8'
                            }, '로딩 중...') :
                            posts.map((post, index) => 
                                React.createElement('div', {
                                    key: post.id || index,
                                    className: 'card hover:shadow-lg transition-shadow cursor-pointer',
                                    onClick: () => {
                                        if (isAuthenticated) {
                                            alert(`"${post.title}" 게시글 상세 기능 개발 예정!`);
                                        } else {
                                            alert('게시글 상세보기는 로그인 후 이용 가능합니다.');
                                        }
                                    }
                                }, [
                                    React.createElement('div', {
                                        key: 'post-header',
                                        className: 'flex justify-between items-start mb-3'
                                    }, [
                                        React.createElement('h3', {
                                            key: 'post-title',
                                            className: 'text-lg font-semibold text-gray-800 hover:text-blue-600'
                                        }, post.title),
                                        React.createElement('div', {
                                            key: 'post-meta',
                                            className: 'text-sm text-gray-500'
                                        }, `조회 ${post.views || 0}`)
                                    ]),
                                    React.createElement('p', {
                                        key: 'post-content',
                                        className: 'text-gray-600 mb-3 line-clamp-2'
                                    }, post.content.substring(0, 100) + (post.content.length > 100 ? '...' : '')),
                                    React.createElement('div', {
                                        key: 'post-footer',
                                        className: 'flex justify-between items-center text-sm text-gray-500'
                                    }, [
                                        React.createElement('span', {
                                            key: 'author'
                                        }, `작성자: ${post.user_profiles?.nickname || post.author || '익명'}`),
                                        React.createElement('span', {
                                            key: 'date'
                                        }, new Date(post.created_at).toLocaleDateString())
                                    ])
                                ])
                            )
                    ])
                ])
            ]);
        };

        // 마이페이지 렌더링
        const renderMyPageView = () => {
            const [activeTab, setActiveTab] = React.useState('profile');
            const [myCalculations, setMyCalculations] = React.useState([]);
            const [myPosts, setMyPosts] = React.useState([]);
            const [isLoading, setIsLoading] = React.useState(true);

            // 내 데이터 불러오기
            React.useEffect(() => {
                const fetchMyData = async () => {
                    try {
                        // 내 계산 결과 조회
                        const { data: calculations, error: calcError } = await supabaseClient
                            .from('career_calculations')
                            .select('*')
                            .eq('user_id', currentUser.id)
                            .order('created_at', { ascending: false });

                        if (!calcError) {
                            setMyCalculations(calculations || []);
                        }

                        // 내 게시글 조회
                        const { data: posts, error: postsError } = await supabaseClient
                            .from('job_seeker_posts')
                            .select('*')
                            .eq('user_id', currentUser.id)
                            .order('created_at', { ascending: false });

                        if (!postsError) {
                            setMyPosts(posts || []);
                        }

                    } catch (error) {
                        console.error('MyPage data fetch error:', error);
                        // 목업 데이터
                        setMyCalculations([
                            { id: 1, total_score: 75, grade: 'B급 (상위 30%)', created_at: '2025-08-29T10:00:00' }
                        ]);
                        setMyPosts([
                            { id: 1, title: '취업 준비 팁 공유', views: 45, created_at: '2025-08-29T09:00:00' }
                        ]);
                    } finally {
                        setIsLoading(false);
                    }
                };

                if (isAuthenticated) {
                    fetchMyData();
                }
            }, [isAuthenticated]);

            return React.createElement('div', {
                className: 'min-h-screen bg-gradient-to-br from-green-50 to-blue-50'
            }, [
                // 헤더
                React.createElement('header', {
                    key: 'mypage-header',
                    className: 'bg-white shadow-sm border-b'
                }, React.createElement('div', {
                    className: 'max-w-7xl mx-auto px-4 py-6'
                }, [
                    React.createElement('div', {
                        key: 'header-content',
                        className: 'flex items-center justify-between'
                    }, [
                        React.createElement('button', {
                            key: 'back-btn',
                            className: 'text-gray-600 hover:text-gray-800 text-lg',
                            onClick: () => setCurrentView('home')
                        }, '← 홈으로'),
                        React.createElement('h1', {
                            key: 'mypage-title',
                            className: 'text-2xl font-bold text-gray-900'
                        }, '👤 마이페이지'),
                        React.createElement('div', {
                            key: 'space'
                        })
                    ])
                ])),

                // 메인 컨텐츠
                React.createElement('main', {
                    key: 'mypage-main',
                    className: 'max-w-6xl mx-auto px-4 py-8'
                }, [
                    // 프로필 카드
                    React.createElement('div', {
                        key: 'profile-card',
                        className: 'card mb-8'
                    }, [
                        React.createElement('div', {
                            key: 'profile-info',
                            className: 'flex items-center space-x-4'
                        }, [
                            React.createElement('div', {
                                key: 'avatar',
                                className: 'w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-2xl font-bold'
                            }, (currentUser?.user_metadata?.nickname || currentUser?.email || 'U')[0].toUpperCase()),
                            React.createElement('div', {
                                key: 'info'
                            }, [
                                React.createElement('h2', {
                                    key: 'name',
                                    className: 'text-xl font-bold text-gray-800'
                                }, currentUser?.user_metadata?.nickname || '사용자'),
                                React.createElement('p', {
                                    key: 'email',
                                    className: 'text-gray-600'
                                }, currentUser?.email),
                                React.createElement('p', {
                                    key: 'join-date',
                                    className: 'text-sm text-gray-500'
                                }, `가입일: ${new Date(currentUser?.created_at).toLocaleDateString()}`)
                            ])
                        ])
                    ]),

                    // 탭 메뉴
                    React.createElement('div', {
                        key: 'tab-menu',
                        className: 'flex space-x-1 bg-gray-100 p-1 rounded-lg mb-6'
                    }, [
                        React.createElement('button', {
                            key: 'profile-tab',
                            className: `px-4 py-2 rounded-md font-medium transition-all ${
                                activeTab === 'profile' 
                                ? 'bg-white text-blue-600 shadow-sm' 
                                : 'text-gray-600 hover:text-gray-800'
                            }`,
                            onClick: () => setActiveTab('profile')
                        }, '프로필'),
                        React.createElement('button', {
                            key: 'calculations-tab',
                            className: `px-4 py-2 rounded-md font-medium transition-all ${
                                activeTab === 'calculations' 
                                ? 'bg-white text-blue-600 shadow-sm' 
                                : 'text-gray-600 hover:text-gray-800'
                            }`,
                            onClick: () => setActiveTab('calculations')
                        }, '진단 기록'),
                        React.createElement('button', {
                            key: 'posts-tab',
                            className: `px-4 py-2 rounded-md font-medium transition-all ${
                                activeTab === 'posts' 
                                ? 'bg-white text-blue-600 shadow-sm' 
                                : 'text-gray-600 hover:text-gray-800'
                            }`,
                            onClick: () => setActiveTab('posts')
                        }, '내 게시글'),
                        React.createElement('button', {
                            key: 'settings-tab',
                            className: `px-4 py-2 rounded-md font-medium transition-all ${
                                activeTab === 'settings' 
                                ? 'bg-white text-blue-600 shadow-sm' 
                                : 'text-gray-600 hover:text-gray-800'
                            }`,
                            onClick: () => setActiveTab('settings')
                        }, '설정')
                    ]),

                    // 탭 컨텐츠
                    React.createElement('div', {
                        key: 'tab-content',
                        className: 'card min-h-[400px]'
                    }, [
                        // 프로필 탭
                        activeTab === 'profile' ? React.createElement('div', {
                            key: 'profile-content'
                        }, [
                            React.createElement('h3', {
                                key: 'profile-title',
                                className: 'text-xl font-bold text-gray-800 mb-4'
                            }, '프로필 정보'),
                            React.createElement('div', {
                                key: 'profile-stats',
                                className: 'grid grid-cols-1 md:grid-cols-3 gap-6'
                            }, [
                                React.createElement('div', {
                                    key: 'stat-1',
                                    className: 'bg-blue-50 p-4 rounded-lg text-center'
                                }, [
                                    React.createElement('div', {
                                        key: 'stat-number',
                                        className: 'text-2xl font-bold text-blue-600'
                                    }, myCalculations.length),
                                    React.createElement('div', {
                                        key: 'stat-label',
                                        className: 'text-sm text-gray-600 mt-1'
                                    }, '진단 횟수')
                                ]),
                                React.createElement('div', {
                                    key: 'stat-2',
                                    className: 'bg-green-50 p-4 rounded-lg text-center'
                                }, [
                                    React.createElement('div', {
                                        key: 'stat-number',
                                        className: 'text-2xl font-bold text-green-600'
                                    }, myPosts.length),
                                    React.createElement('div', {
                                        key: 'stat-label',
                                        className: 'text-sm text-gray-600 mt-1'
                                    }, '작성 글')
                                ]),
                                React.createElement('div', {
                                    key: 'stat-3',
                                    className: 'bg-purple-50 p-4 rounded-lg text-center'
                                }, [
                                    React.createElement('div', {
                                        key: 'stat-number',
                                        className: 'text-2xl font-bold text-purple-600'
                                    }, '0'),
                                    React.createElement('div', {
                                        key: 'stat-label',
                                        className: 'text-sm text-gray-600 mt-1'
                                    }, '상담 횟수')
                                ])
                            ])
                        ]) : null,

                        // 진단 기록 탭
                        activeTab === 'calculations' ? React.createElement('div', {
                            key: 'calculations-content'
                        }, [
                            React.createElement('h3', {
                                key: 'calc-title',
                                className: 'text-xl font-bold text-gray-800 mb-4'
                            }, '취업경쟁력 진단 기록'),
                            myCalculations.length === 0 ? 
                                React.createElement('div', {
                                    key: 'no-calc',
                                    className: 'text-center py-12 text-gray-500'
                                }, [
                                    React.createElement('div', {
                                        key: 'icon',
                                        className: 'text-4xl mb-4'
                                    }, '📊'),
                                    React.createElement('p', {
                                        key: 'text'
                                    }, '아직 진단 기록이 없습니다.'),
                                    React.createElement('button', {
                                        key: 'calc-btn',
                                        className: 'btn-primary mt-4',
                                        onClick: () => setCurrentView('calculator')
                                    }, '진단 시작하기')
                                ]) :
                                React.createElement('div', {
                                    key: 'calc-list',
                                    className: 'space-y-4'
                                }, myCalculations.map((calc, index) => 
                                    React.createElement('div', {
                                        key: calc.id || index,
                                        className: 'border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow'
                                    }, [
                                        React.createElement('div', {
                                            key: 'calc-header',
                                            className: 'flex justify-between items-center mb-2'
                                        }, [
                                            React.createElement('span', {
                                                key: 'score',
                                                className: 'text-xl font-bold text-blue-600'
                                            }, `${calc.total_score}점`),
                                            React.createElement('span', {
                                                key: 'date',
                                                className: 'text-sm text-gray-500'
                                            }, new Date(calc.created_at).toLocaleDateString())
                                        ]),
                                        React.createElement('div', {
                                            key: 'grade',
                                            className: 'text-gray-700'
                                        }, calc.grade)
                                    ])
                                ))
                        ]) : null,

                        // 내 게시글 탭
                        activeTab === 'posts' ? React.createElement('div', {
                            key: 'posts-content'
                        }, [
                            React.createElement('h3', {
                                key: 'posts-title',
                                className: 'text-xl font-bold text-gray-800 mb-4'
                            }, '내가 쓴 게시글'),
                            myPosts.length === 0 ? 
                                React.createElement('div', {
                                    key: 'no-posts',
                                    className: 'text-center py-12 text-gray-500'
                                }, [
                                    React.createElement('div', {
                                        key: 'icon',
                                        className: 'text-4xl mb-4'
                                    }, '📝'),
                                    React.createElement('p', {
                                        key: 'text'
                                    }, '아직 작성한 게시글이 없습니다.'),
                                    React.createElement('button', {
                                        key: 'community-btn',
                                        className: 'btn-primary mt-4',
                                        onClick: () => setCurrentView('community')
                                    }, '커뮤니티 가기')
                                ]) :
                                React.createElement('div', {
                                    key: 'posts-list',
                                    className: 'space-y-4'
                                }, myPosts.map((post, index) => 
                                    React.createElement('div', {
                                        key: post.id || index,
                                        className: 'border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer',
                                        onClick: () => alert('게시글 상세 보기 개발 예정!')
                                    }, [
                                        React.createElement('div', {
                                            key: 'post-header',
                                            className: 'flex justify-between items-start mb-2'
                                        }, [
                                            React.createElement('h4', {
                                                key: 'title',
                                                className: 'font-semibold text-gray-800'
                                            }, post.title),
                                            React.createElement('span', {
                                                key: 'views',
                                                className: 'text-sm text-gray-500'
                                            }, `조회 ${post.views || 0}`)
                                        ]),
                                        React.createElement('div', {
                                            key: 'post-date',
                                            className: 'text-sm text-gray-500'
                                        }, new Date(post.created_at).toLocaleDateString())
                                    ])
                                ))
                        ]) : null,

                        // 설정 탭
                        activeTab === 'settings' ? React.createElement('div', {
                            key: 'settings-content'
                        }, [
                            React.createElement('h3', {
                                key: 'settings-title',
                                className: 'text-xl font-bold text-gray-800 mb-4'
                            }, '계정 설정'),
                            React.createElement('div', {
                                key: 'settings-options',
                                className: 'space-y-4'
                            }, [
                                React.createElement('button', {
                                    key: 'logout-btn',
                                    className: 'w-full bg-red-500 hover:bg-red-600 text-white px-4 py-3 rounded-lg font-medium transition-colors',
                                    onClick: handleLogout
                                }, '로그아웃'),
                                React.createElement('div', {
                                    key: 'danger-zone',
                                    className: 'mt-8 pt-8 border-t border-red-200'
                                }, [
                                    React.createElement('h4', {
                                        key: 'danger-title',
                                        className: 'text-lg font-semibold text-red-600 mb-4'
                                    }, '위험 구역'),
                                    React.createElement('button', {
                                        key: 'delete-account',
                                        className: 'bg-red-100 hover:bg-red-200 text-red-700 px-4 py-2 rounded-lg font-medium transition-colors',
                                        onClick: () => alert('계정 삭제 기능은 개발 예정입니다.')
                                    }, '계정 삭제')
                                ])
                            ])
                        ]) : null
                    ])
                ])
            ]);
        };

        // 10분 단위 상담 예약 시스템 컴포넌트
        const renderConsultationView = () => {
            const [consultationDuration, setConsultationDuration] = React.useState(30); // 기본 30분
            
            // 시스템 설정 (실제로는 데이터베이스에서 가져와야 함)
            const systemSettings = {
                commissionRate: 0.20, // 20% 수수료
                availableTimeUnits: [10, 20, 30, 40, 50, 60] // 10분 단위
            };
            const [experts] = React.useState([
                { 
                    id: 1, 
                    name: '김개발', 
                    company: '네이버', 
                    position: '시니어 개발자',
                    industry: 'tech_development',
                    hourlyRate: 100000,
                    experience: '5년',
                    specialties: ['React', 'Node.js', '면접 코칭']
                },
                { 
                    id: 2, 
                    name: '박마케터', 
                    company: '카카오', 
                    position: '마케팅 팀장',
                    industry: 'marketing_planning',
                    hourlyRate: 80000,
                    experience: '7년',
                    specialties: ['디지털 마케팅', '브랜딩', '커리어 설계']
                }
            ]);

            // 상담료 계산
            const calculateConsultationFee = (hourlyRate, duration) => {
                return Math.round((hourlyRate / 60) * duration);
            };

            const renderPriceBreakdown = (consultationFee) => {
                const platformFee = Math.round(consultationFee * systemSettings.commissionRate);
                const expertPayout = consultationFee - platformFee;
                
                return React.createElement('div', {
                    className: 'card bg-blue-50'
                }, [
                    React.createElement('h4', {
                        key: 'title',
                        className: 'font-semibold mb-3 text-blue-800'
                    }, '💰 상담료 상세내역'),
                    
                    React.createElement('div', {
                        key: 'breakdown',
                        className: 'space-y-2 text-sm'
                    }, [
                        React.createElement('div', {
                            key: 'consultation-fee',
                            className: 'flex justify-between'
                        }, [
                            React.createElement('span', { key: 'label' }, `상담료 (${consultationDuration}분)`),
                            React.createElement('span', { 
                                key: 'amount',
                                className: 'font-semibold' 
                            }, `${consultationFee.toLocaleString()}원`)
                        ]),
                        
                        React.createElement('div', {
                            key: 'platform-fee', 
                            className: 'flex justify-between text-gray-600'
                        }, [
                            React.createElement('span', { key: 'label' }, `플랫폼 수수료 (${Math.round(systemSettings.commissionRate * 100)}%)`),
                            React.createElement('span', { key: 'amount' }, `-${platformFee.toLocaleString()}원`)
                        ]),
                        
                        React.createElement('div', {
                            key: 'expert-payout',
                            className: 'flex justify-between text-gray-600'  
                        }, [
                            React.createElement('span', { key: 'label' }, '전문가 수령액'),
                            React.createElement('span', { key: 'amount' }, `${expertPayout.toLocaleString()}원`)
                        ]),
                        
                        React.createElement('hr', { key: 'divider', className: 'my-2' }),
                        
                        React.createElement('div', {
                            key: 'total',
                            className: 'flex justify-between font-bold text-lg text-blue-800'
                        }, [
                            React.createElement('span', { key: 'label' }, '결제 금액'),
                            React.createElement('span', { 
                                key: 'amount'
                            }, `${consultationFee.toLocaleString()}원`)
                        ])
                    ])
                ]);
            };

            return React.createElement('div', {
                className: 'min-h-screen bg-gradient-to-br from-green-50 to-blue-50'
            }, [
                // 헤더
                React.createElement('header', {
                    key: 'consultation-header',
                    className: 'bg-white shadow-sm border-b'
                }, React.createElement('div', {
                    className: 'max-w-7xl mx-auto px-4 py-6'
                }, [
                    React.createElement('div', {
                        key: 'header-content',
                        className: 'flex items-center justify-between'
                    }, [
                        React.createElement('button', {
                            key: 'back-btn',
                            className: 'text-gray-600 hover:text-gray-800 text-lg',
                            onClick: () => setCurrentView('home')
                        }, '← 홈으로'),
                        React.createElement('h1', {
                            key: 'consultation-title',
                            className: 'text-2xl font-bold text-gray-900'
                        }, '💼 전문가 상담 예약'),
                        React.createElement('div', {
                            key: 'space'
                        })
                    ])
                ])),

                // 메인 컨텐츠
                React.createElement('main', {
                    key: 'consultation-main',
                    className: 'max-w-6xl mx-auto px-4 py-8'
                }, [
                    // 상담 시간 선택
                    React.createElement('div', {
                        key: 'time-selector',
                        className: 'card mb-6'
                    }, [
                        React.createElement('h3', {
                            key: 'time-title',
                            className: 'text-lg font-semibold mb-4'
                        }, '⏰ 상담 시간 선택'),
                        
                        React.createElement('div', {
                            key: 'time-options',
                            className: 'grid grid-cols-3 sm:grid-cols-6 gap-3'
                        }, systemSettings.availableTimeUnits.map(minutes => 
                            React.createElement('button', {
                                key: minutes,
                                className: `p-3 border-2 rounded-lg transition-all text-center ${
                                    consultationDuration === minutes 
                                        ? 'border-blue-500 bg-blue-50 text-blue-700' 
                                        : 'border-gray-300 hover:border-gray-400'
                                }`,
                                onClick: () => setConsultationDuration(minutes)
                            }, [
                                React.createElement('div', {
                                    key: 'duration',
                                    className: 'font-semibold'
                                }, `${minutes}분`)
                            ])
                        ))
                    ]),

                    // 전문가 목록
                    React.createElement('div', {
                        key: 'experts-list',
                        className: 'space-y-6'
                    }, experts.map(expert => {
                        const consultationFee = calculateConsultationFee(expert.hourlyRate, consultationDuration);
                        
                        return React.createElement('div', {
                            key: expert.id,
                            className: 'card hover:shadow-lg transition-shadow'
                        }, [
                            React.createElement('div', {
                                key: 'expert-info',
                                className: 'flex flex-col lg:flex-row gap-6'
                            }, [
                                // 전문가 정보
                                React.createElement('div', {
                                    key: 'info',
                                    className: 'flex-1'
                                }, [
                                    React.createElement('div', {
                                        key: 'header',
                                        className: 'flex items-center space-x-4 mb-4'
                                    }, [
                                        React.createElement('div', {
                                            key: 'avatar',
                                            className: 'w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-lg font-bold'
                                        }, expert.name[0]),
                                        React.createElement('div', {
                                            key: 'details'
                                        }, [
                                            React.createElement('h3', {
                                                key: 'name',
                                                className: 'text-xl font-bold text-gray-800'
                                            }, expert.name),
                                            React.createElement('p', {
                                                key: 'position',
                                                className: 'text-gray-600'
                                            }, `${expert.company} • ${expert.position}`),
                                            React.createElement('p', {
                                                key: 'experience',
                                                className: 'text-sm text-blue-600'
                                            }, `경력 ${expert.experience}`)
                                        ])
                                    ]),
                                    
                                    React.createElement('div', {
                                        key: 'specialties',
                                        className: 'mb-4'
                                    }, [
                                        React.createElement('p', {
                                            key: 'label',
                                            className: 'text-sm text-gray-600 mb-2'
                                        }, '전문 분야:'),
                                        React.createElement('div', {
                                            key: 'tags',
                                            className: 'flex flex-wrap gap-2'
                                        }, expert.specialties.map((specialty, index) => 
                                            React.createElement('span', {
                                                key: index,
                                                className: 'px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full'
                                            }, specialty)
                                        ))
                                    ])
                                ]),

                                // 가격 정보 및 예약 버튼
                                React.createElement('div', {
                                    key: 'booking',
                                    className: 'lg:w-1/3'
                                }, [
                                    renderPriceBreakdown(consultationFee),
                                    
                                    React.createElement('div', {
                                        key: 'booking-buttons',
                                        className: 'space-y-3 mt-4'
                                    }, [
                                        React.createElement('button', {
                                            key: 'book-btn',
                                            className: 'btn-primary w-full',
                                            onClick: async () => {
                                                if (!isAuthenticated) {
                                                    alert('상담 예약은 로그인이 필요합니다.');
                                                    setCurrentView('auth');
                                                    return;
                                                }
                                                
                                                try {
                                                    // 상담 예약 생성
                                                    const bookingData = {
                                                        job_seeker_id: currentUser?.id,
                                                        professional_id: `expert-${expert.id}`, // 실제 전문가 ID로 교체 필요
                                                        consultation_type: 'career_planning',
                                                        consultation_method: 'video_call',
                                                        scheduled_date: new Date().toISOString().split('T')[0],
                                                        scheduled_time: '14:00:00',
                                                        duration_minutes: consultationDuration,
                                                        consultation_fee: consultationFee,
                                                        platform_fee_rate: systemSettings.commissionRate,
                                                        total_amount: consultationFee
                                                    };
                                                    
                                                    const { data, error } = await supabaseClient
                                                        .from('consultation_bookings')
                                                        .insert(bookingData)
                                                        .select()
                                                        .single();
                                                    
                                                    if (error) throw error;
                                                    
                                                    alert('상담 예약이 완료되었습니다! 채팅방에서 전문가와 상담하세요.');
                                                    setSelectedBooking(data.id);
                                                    
                                                } catch (error) {
                                                    console.error('Booking error:', error);
                                                    alert('예약에 실패했습니다: ' + error.message);
                                                }
                                            }
                                        }, `💼 ${consultationDuration}분 상담 예약`),
                                        
                                        // 데모용 채팅 입장 버튼 (실제로는 예약 완료 후 표시)
                                        React.createElement('button', {
                                            key: 'chat-btn',
                                            className: 'btn-secondary w-full bg-green-500 hover:bg-green-600 text-white',
                                            onClick: () => {
                                                if (!isAuthenticated) {
                                                    alert('채팅은 로그인이 필요합니다.');
                                                    setCurrentView('auth');
                                                    return;
                                                }
                                                
                                                // 데모용 채팅방 ID 생성
                                                const demoBookingId = `demo-${expert.id}-${Date.now()}`;
                                                enterConsultationChat(demoBookingId);
                                            }
                                        }, '💬 채팅방 입장 (데모)')
                                    ])
                                ])
                            ])
                        ]);
                    }))
                ])
            ]);
        };

        // 쪽지 시스템 컴포넌트
        const renderMessagesView = () => {
            const [activeTab, setActiveTab] = React.useState('inbox'); // inbox, sent, compose
            const [messageContent, setMessageContent] = React.useState({ subject: '', content: '', receiverId: '' });
            const [isLoading, setIsLoading] = React.useState(false);

            // 받은 쪽지 목록
            const [inboxMessages] = React.useState([
                {
                    id: 1,
                    subject: '면접 준비 스터디 참여 문의',
                    content: '안녕하세요! 게시글을 보고 연락드립니다. 함께 면접 준비하실래요?',
                    sender_name: '취업준비생A',
                    is_read: false,
                    created_at: '2025-08-29T10:00:00'
                },
                {
                    id: 2,
                    subject: '포트폴리오 피드백 감사합니다',
                    content: '조언해주신 내용 반영해서 수정했습니다. 정말 감사해요!',
                    sender_name: '신입개발자B',
                    is_read: true,
                    created_at: '2025-08-28T15:30:00'
                }
            ]);

            // 보낸 쪽지 목록
            const [sentMessages] = React.useState([
                {
                    id: 3,
                    subject: '개발자 스터디 그룹 초대',
                    content: 'React 스터디 그룹을 만들었습니다. 참여하실래요?',
                    receiver_name: '예비개발자C',
                    created_at: '2025-08-28T09:00:00'
                }
            ]);

            // 쪽지 전송
            const sendMessage = async () => {
                if (!messageContent.subject.trim() || !messageContent.content.trim()) {
                    alert('제목과 내용을 모두 입력해주세요.');
                    return;
                }

                setIsLoading(true);
                try {
                    // 실제 구현 시 Supabase에 저장
                    // const { error } = await supabaseClient
                    //     .from('member_messages')
                    //     .insert({
                    //         receiver_id: messageContent.receiverId,
                    //         subject: messageContent.subject,
                    //         content: messageContent.content
                    //     });

                    alert('쪽지가 전송되었습니다!');
                    setMessageContent({ subject: '', content: '', receiverId: '' });
                    setActiveTab('inbox');
                } catch (error) {
                    console.error('Message send error:', error);
                    alert('쪽지 전송 중 오류가 발생했습니다.');
                } finally {
                    setIsLoading(false);
                }
            };

            const renderTabButton = (tab, label, icon) => {
                return React.createElement('button', {
                    key: tab,
                    className: `px-4 py-2 rounded-lg font-medium transition-colors ${
                        activeTab === tab 
                            ? 'bg-blue-500 text-white' 
                            : 'text-gray-600 hover:bg-gray-100'
                    }`,
                    onClick: () => setActiveTab(tab)
                }, `${icon} ${label}`);
            };

            return React.createElement('div', {
                className: 'min-h-screen bg-gradient-to-br from-green-50 to-blue-50'
            }, [
                // 헤더
                React.createElement('header', {
                    key: 'messages-header',
                    className: 'bg-white shadow-sm border-b'
                }, React.createElement('div', {
                    className: 'max-w-7xl mx-auto px-4 py-6'
                }, [
                    React.createElement('div', {
                        key: 'header-content',
                        className: 'flex items-center justify-between'
                    }, [
                        React.createElement('button', {
                            key: 'back-btn',
                            className: 'text-gray-600 hover:text-gray-800 text-lg',
                            onClick: () => setCurrentView('home')
                        }, '← 홈으로'),
                        React.createElement('h1', {
                            key: 'messages-title',
                            className: 'text-2xl font-bold text-gray-900'
                        }, '📩 쪽지'),
                        React.createElement('div', {
                            key: 'space'
                        })
                    ])
                ])),

                // 메인 컨텐츠
                React.createElement('main', {
                    key: 'messages-main',
                    className: 'max-w-4xl mx-auto px-4 py-8'
                }, [
                    // 탭 네비게이션
                    React.createElement('div', {
                        key: 'tabs',
                        className: 'flex space-x-2 mb-6'
                    }, [
                        renderTabButton('inbox', '받은쪽지', '📥'),
                        renderTabButton('sent', '보낸쪽지', '📤'),
                        renderTabButton('compose', '쪽지쓰기', '✏️')
                    ]),

                    // 받은쪽지 탭
                    activeTab === 'inbox' ? React.createElement('div', {
                        key: 'inbox-content',
                        className: 'card'
                    }, [
                        React.createElement('h3', {
                            key: 'inbox-title',
                            className: 'text-xl font-bold text-gray-800 mb-4'
                        }, '📥 받은쪽지'),
                        
                        inboxMessages.length === 0 ? 
                            React.createElement('div', {
                                key: 'no-messages',
                                className: 'text-center py-12 text-gray-500'
                            }, [
                                React.createElement('div', {
                                    key: 'icon',
                                    className: 'text-4xl mb-4'
                                }, '📥'),
                                React.createElement('p', {
                                    key: 'text'
                                }, '받은 쪽지가 없습니다.')
                            ]) :
                            React.createElement('div', {
                                key: 'messages-list',
                                className: 'space-y-3'
                            }, inboxMessages.map(message => 
                                React.createElement('div', {
                                    key: message.id,
                                    className: `border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer ${
                                        !message.is_read ? 'bg-blue-50 border-blue-200' : ''
                                    }`,
                                    onClick: () => {
                                        setSelectedMessage(message);
                                        alert(`쪽지 내용: ${message.content}`);
                                    }
                                }, [
                                    React.createElement('div', {
                                        key: 'message-header',
                                        className: 'flex justify-between items-start mb-2'
                                    }, [
                                        React.createElement('div', {
                                            key: 'info'
                                        }, [
                                            React.createElement('h4', {
                                                key: 'subject',
                                                className: `font-semibold text-gray-800 ${!message.is_read ? 'font-bold' : ''}`
                                            }, message.subject),
                                            React.createElement('p', {
                                                key: 'sender',
                                                className: 'text-sm text-gray-600'
                                            }, `발신자: ${message.sender_name}`)
                                        ]),
                                        React.createElement('div', {
                                            key: 'meta',
                                            className: 'text-right'
                                        }, [
                                            !message.is_read ? React.createElement('span', {
                                                key: 'new-badge',
                                                className: 'inline-block w-2 h-2 bg-blue-500 rounded-full mb-1'
                                            }) : null,
                                            React.createElement('p', {
                                                key: 'date',
                                                className: 'text-xs text-gray-500'
                                            }, new Date(message.created_at).toLocaleDateString())
                                        ])
                                    ]),
                                    React.createElement('p', {
                                        key: 'preview',
                                        className: 'text-sm text-gray-700 line-clamp-2'
                                    }, message.content.substring(0, 80) + (message.content.length > 80 ? '...' : ''))
                                ])
                            ))
                    ]) : null,

                    // 보낸쪽지 탭
                    activeTab === 'sent' ? React.createElement('div', {
                        key: 'sent-content',
                        className: 'card'
                    }, [
                        React.createElement('h3', {
                            key: 'sent-title',
                            className: 'text-xl font-bold text-gray-800 mb-4'
                        }, '📤 보낸쪽지'),
                        
                        sentMessages.length === 0 ? 
                            React.createElement('div', {
                                key: 'no-sent',
                                className: 'text-center py-12 text-gray-500'
                            }, [
                                React.createElement('div', {
                                    key: 'icon',
                                    className: 'text-4xl mb-4'
                                }, '📤'),
                                React.createElement('p', {
                                    key: 'text'
                                }, '보낸 쪽지가 없습니다.')
                            ]) :
                            React.createElement('div', {
                                key: 'sent-list',
                                className: 'space-y-3'
                            }, sentMessages.map(message => 
                                React.createElement('div', {
                                    key: message.id,
                                    className: 'border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer',
                                    onClick: () => alert(`보낸 쪽지 내용: ${message.content}`)
                                }, [
                                    React.createElement('div', {
                                        key: 'sent-header',
                                        className: 'flex justify-between items-start mb-2'
                                    }, [
                                        React.createElement('div', {
                                            key: 'info'
                                        }, [
                                            React.createElement('h4', {
                                                key: 'subject',
                                                className: 'font-semibold text-gray-800'
                                            }, message.subject),
                                            React.createElement('p', {
                                                key: 'receiver',
                                                className: 'text-sm text-gray-600'
                                            }, `받는사람: ${message.receiver_name}`)
                                        ]),
                                        React.createElement('p', {
                                            key: 'date',
                                            className: 'text-xs text-gray-500'
                                        }, new Date(message.created_at).toLocaleDateString())
                                    ]),
                                    React.createElement('p', {
                                        key: 'preview',
                                        className: 'text-sm text-gray-700 line-clamp-2'
                                    }, message.content.substring(0, 80) + (message.content.length > 80 ? '...' : ''))
                                ])
                            ))
                    ]) : null,

                    // 쪽지쓰기 탭
                    activeTab === 'compose' ? React.createElement('div', {
                        key: 'compose-content',
                        className: 'card'
                    }, [
                        React.createElement('h3', {
                            key: 'compose-title',
                            className: 'text-xl font-bold text-gray-800 mb-4'
                        }, '✏️ 쪽지 쓰기'),
                        
                        React.createElement('div', {
                            key: 'compose-form',
                            className: 'space-y-4'
                        }, [
                            // 받는사람 (현재는 임시로 텍스트 입력)
                            React.createElement('div', {
                                key: 'receiver-group'
                            }, [
                                React.createElement('label', {
                                    key: 'receiver-label',
                                    className: 'block text-sm font-medium text-gray-700 mb-2'
                                }, '받는사람'),
                                React.createElement('input', {
                                    key: 'receiver-input',
                                    type: 'text',
                                    placeholder: '받는사람의 닉네임을 입력하세요',
                                    value: messageContent.receiverId,
                                    onChange: (e) => setMessageContent({...messageContent, receiverId: e.target.value}),
                                    className: 'w-full px-3 py-2 border border-gray-300 rounded-lg'
                                })
                            ]),

                            // 제목
                            React.createElement('div', {
                                key: 'subject-group'
                            }, [
                                React.createElement('label', {
                                    key: 'subject-label',
                                    className: 'block text-sm font-medium text-gray-700 mb-2'
                                }, '제목'),
                                React.createElement('input', {
                                    key: 'subject-input',
                                    type: 'text',
                                    placeholder: '쪽지 제목을 입력하세요',
                                    value: messageContent.subject,
                                    onChange: (e) => setMessageContent({...messageContent, subject: e.target.value}),
                                    className: 'w-full px-3 py-2 border border-gray-300 rounded-lg'
                                })
                            ]),

                            // 내용
                            React.createElement('div', {
                                key: 'content-group'
                            }, [
                                React.createElement('label', {
                                    key: 'content-label',
                                    className: 'block text-sm font-medium text-gray-700 mb-2'
                                }, '내용'),
                                React.createElement('textarea', {
                                    key: 'content-textarea',
                                    placeholder: '쪽지 내용을 입력하세요',
                                    value: messageContent.content,
                                    onChange: (e) => setMessageContent({...messageContent, content: e.target.value}),
                                    rows: 8,
                                    className: 'w-full px-3 py-2 border border-gray-300 rounded-lg'
                                })
                            ]),

                            // 전송 버튼
                            React.createElement('div', {
                                key: 'actions',
                                className: 'flex justify-end space-x-3'
                            }, [
                                React.createElement('button', {
                                    key: 'cancel-btn',
                                    className: 'px-6 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50',
                                    onClick: () => {
                                        setMessageContent({ subject: '', content: '', receiverId: '' });
                                        setActiveTab('inbox');
                                    }
                                }, '취소'),
                                React.createElement('button', {
                                    key: 'send-btn',
                                    className: 'btn-primary',
                                    onClick: sendMessage,
                                    disabled: isLoading
                                }, isLoading ? '전송중...' : '📩 쪽지 보내기')
                            ])
                        ])
                    ]) : null
                ])
            ]);
        };

        // 관리자 설정 패널 컴포넌트
        const renderAdminView = () => {
            const [activeAdminTab, setActiveAdminTab] = React.useState('settings'); // settings, experts, statistics
            const [tempSettings, setTempSettings] = React.useState({...systemSettings});
            const [isSaving, setIsSaving] = React.useState(false);
            
            // 전문가 승인 대기 목록 (목업)
            const [pendingExperts] = React.useState([
                {
                    id: 1,
                    name: '이전문가',
                    email: 'expert@company.com',
                    company: '삼성전자',
                    position: '선임연구원',
                    industry: 'tech_development',
                    verification_type: 'employment_certificate',
                    created_at: '2025-08-29T09:00:00'
                }
            ]);

            // 시스템 설정 저장
            const saveSystemSettings = async () => {
                setIsSaving(true);
                try {
                    // 실제 구현 시 Supabase에 저장
                    // const updates = [
                    //     { setting_key: 'platform_commission_rate', setting_value: tempSettings.commissionRate.toString() },
                    //     { setting_key: 'consultation_time_units', setting_value: JSON.stringify(tempSettings.availableTimeUnits) }
                    // ];
                    
                    // for (const update of updates) {
                    //     await supabaseClient
                    //         .from('system_settings')
                    //         .update({ setting_value: update.setting_value })
                    //         .eq('setting_key', update.setting_key);
                    // }

                    setSystemSettings(tempSettings);
                    alert('시스템 설정이 저장되었습니다.');
                } catch (error) {
                    console.error('Settings save error:', error);
                    alert('설정 저장 중 오류가 발생했습니다.');
                } finally {
                    setIsSaving(false);
                }
            };

            const renderAdminTabButton = (tab, label, icon) => {
                return React.createElement('button', {
                    key: tab,
                    className: `px-4 py-2 rounded-lg font-medium transition-colors ${
                        activeAdminTab === tab 
                            ? 'bg-red-500 text-white' 
                            : 'text-gray-600 hover:bg-gray-100'
                    }`,
                    onClick: () => setActiveAdminTab(tab)
                }, `${icon} ${label}`);
            };

            return React.createElement('div', {
                className: 'min-h-screen bg-gradient-to-br from-red-50 to-orange-50'
            }, [
                // 헤더
                React.createElement('header', {
                    key: 'admin-header',
                    className: 'bg-white shadow-sm border-b border-red-200'
                }, React.createElement('div', {
                    className: 'max-w-7xl mx-auto px-4 py-6'
                }, [
                    React.createElement('div', {
                        key: 'header-content',
                        className: 'flex items-center justify-between'
                    }, [
                        React.createElement('button', {
                            key: 'back-btn',
                            className: 'text-gray-600 hover:text-gray-800 text-lg',
                            onClick: () => setCurrentView('home')
                        }, '← 홈으로'),
                        React.createElement('h1', {
                            key: 'admin-title',
                            className: 'text-2xl font-bold text-red-900'
                        }, '🔧 관리자 패널'),
                        React.createElement('div', {
                            key: 'user-info',
                            className: 'text-sm text-gray-600'
                        }, `${currentUser?.user_metadata?.nickname || '관리자'} (${userRole})`)
                    ])
                ])),

                // 메인 컨텐츠
                React.createElement('main', {
                    key: 'admin-main',
                    className: 'max-w-6xl mx-auto px-4 py-8'
                }, [
                    // 탭 네비게이션
                    React.createElement('div', {
                        key: 'admin-tabs',
                        className: 'flex space-x-2 mb-6'
                    }, [
                        renderAdminTabButton('settings', '시스템설정', '⚙️'),
                        renderAdminTabButton('experts', '전문가승인', '👨‍💼'),
                        renderAdminTabButton('statistics', '통계', '📊')
                    ]),

                    // 시스템 설정 탭
                    activeAdminTab === 'settings' ? React.createElement('div', {
                        key: 'settings-content',
                        className: 'card'
                    }, [
                        React.createElement('h3', {
                            key: 'settings-title',
                            className: 'text-xl font-bold text-gray-800 mb-6'
                        }, '⚙️ 시스템 설정'),
                        
                        React.createElement('div', {
                            key: 'settings-form',
                            className: 'space-y-6'
                        }, [
                            // 수수료율 설정
                            React.createElement('div', {
                                key: 'commission-group'
                            }, [
                                React.createElement('label', {
                                    key: 'commission-label',
                                    className: 'block text-sm font-medium text-gray-700 mb-2'
                                }, '플랫폼 수수료율 (%)'),
                                React.createElement('div', {
                                    key: 'commission-input-group',
                                    className: 'flex items-center space-x-3'
                                }, [
                                    React.createElement('input', {
                                        key: 'commission-input',
                                        type: 'number',
                                        min: '5',
                                        max: '50',
                                        step: '1',
                                        value: Math.round(tempSettings.commissionRate * 100),
                                        onChange: (e) => setTempSettings({
                                            ...tempSettings, 
                                            commissionRate: parseFloat(e.target.value) / 100
                                        }),
                                        className: 'w-24 px-3 py-2 border border-gray-300 rounded-lg'
                                    }),
                                    React.createElement('span', {
                                        key: 'commission-unit',
                                        className: 'text-gray-600'
                                    }, '%'),
                                    React.createElement('div', {
                                        key: 'commission-preview',
                                        className: 'text-sm text-gray-500'
                                    }, `예시: 10만원 상담 → 플랫폼 ${Math.round(100000 * tempSettings.commissionRate).toLocaleString()}원, 전문가 ${Math.round(100000 * (1 - tempSettings.commissionRate)).toLocaleString()}원`)
                                ])
                            ]),

                            // 상담 시간 단위 설정
                            React.createElement('div', {
                                key: 'time-units-group'
                            }, [
                                React.createElement('label', {
                                    key: 'time-units-label',
                                    className: 'block text-sm font-medium text-gray-700 mb-2'
                                }, '상담 시간 단위 (분)'),
                                React.createElement('div', {
                                    key: 'time-units-info',
                                    className: 'text-sm text-gray-600 mb-3'
                                }, '현재 설정된 시간 단위: ' + tempSettings.availableTimeUnits.join(', ') + '분'),
                                React.createElement('div', {
                                    key: 'time-units-grid',
                                    className: 'grid grid-cols-6 gap-2'
                                }, [10, 20, 30, 40, 50, 60].map(minutes => 
                                    React.createElement('label', {
                                        key: minutes,
                                        className: 'flex items-center space-x-2 p-2 border border-gray-300 rounded cursor-pointer hover:bg-gray-50'
                                    }, [
                                        React.createElement('input', {
                                            key: 'checkbox',
                                            type: 'checkbox',
                                            checked: tempSettings.availableTimeUnits.includes(minutes),
                                            onChange: (e) => {
                                                const newUnits = e.target.checked 
                                                    ? [...tempSettings.availableTimeUnits, minutes].sort((a, b) => a - b)
                                                    : tempSettings.availableTimeUnits.filter(unit => unit !== minutes);
                                                setTempSettings({...tempSettings, availableTimeUnits: newUnits});
                                            }
                                        }),
                                        React.createElement('span', {
                                            key: 'label',
                                            className: 'text-sm'
                                        }, `${minutes}분`)
                                    ])
                                ))
                            ]),

                            // 저장 버튼
                            React.createElement('div', {
                                key: 'save-actions',
                                className: 'flex justify-end space-x-3 pt-4 border-t'
                            }, [
                                React.createElement('button', {
                                    key: 'reset-btn',
                                    className: 'px-6 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50',
                                    onClick: () => setTempSettings({...systemSettings})
                                }, '초기화'),
                                React.createElement('button', {
                                    key: 'save-btn',
                                    className: 'btn-primary',
                                    onClick: saveSystemSettings,
                                    disabled: isSaving
                                }, isSaving ? '저장중...' : '💾 설정 저장')
                            ])
                        ])
                    ]) : null,

                    // 전문가 승인 탭
                    activeAdminTab === 'experts' ? React.createElement('div', {
                        key: 'experts-content',
                        className: 'card'
                    }, [
                        React.createElement('h3', {
                            key: 'experts-title',
                            className: 'text-xl font-bold text-gray-800 mb-4'
                        }, '👨‍💼 전문가 승인 관리'),
                        
                        pendingExperts.length === 0 ? 
                            React.createElement('div', {
                                key: 'no-pending',
                                className: 'text-center py-12 text-gray-500'
                            }, [
                                React.createElement('div', {
                                    key: 'icon',
                                    className: 'text-4xl mb-4'
                                }, '✅'),
                                React.createElement('p', {
                                    key: 'text'
                                }, '승인 대기 중인 전문가가 없습니다.')
                            ]) :
                            React.createElement('div', {
                                key: 'experts-list',
                                className: 'space-y-4'
                            }, pendingExperts.map(expert => 
                                React.createElement('div', {
                                    key: expert.id,
                                    className: 'border border-gray-200 rounded-lg p-4'
                                }, [
                                    React.createElement('div', {
                                        key: 'expert-header',
                                        className: 'flex justify-between items-start mb-4'
                                    }, [
                                        React.createElement('div', {
                                            key: 'info'
                                        }, [
                                            React.createElement('h4', {
                                                key: 'name',
                                                className: 'font-bold text-lg text-gray-800'
                                            }, expert.name),
                                            React.createElement('p', {
                                                key: 'position',
                                                className: 'text-gray-600'
                                            }, `${expert.company} • ${expert.position}`),
                                            React.createElement('p', {
                                                key: 'email',
                                                className: 'text-sm text-gray-500'
                                            }, expert.email)
                                        ]),
                                        React.createElement('div', {
                                            key: 'date',
                                            className: 'text-sm text-gray-500'
                                        }, new Date(expert.created_at).toLocaleDateString())
                                    ]),
                                    
                                    React.createElement('div', {
                                        key: 'expert-actions',
                                        className: 'flex space-x-3'
                                    }, [
                                        React.createElement('button', {
                                            key: 'approve-btn',
                                            className: 'btn-primary',
                                            onClick: () => alert(`${expert.name} 전문가 승인 기능 개발 예정!`)
                                        }, '✅ 승인'),
                                        React.createElement('button', {
                                            key: 'reject-btn',
                                            className: 'px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600',
                                            onClick: () => alert(`${expert.name} 전문가 거절 기능 개발 예정!`)
                                        }, '❌ 거절'),
                                        React.createElement('button', {
                                            key: 'detail-btn',
                                            className: 'px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50',
                                            onClick: () => alert(`${expert.name} 전문가 상세정보 보기 개발 예정!`)
                                        }, '📋 상세보기')
                                    ])
                                ])
                            ))
                    ]) : null,

                    // 통계 탭
                    activeAdminTab === 'statistics' ? React.createElement('div', {
                        key: 'statistics-content',
                        className: 'space-y-6'
                    }, [
                        // 통계 카드들
                        React.createElement('div', {
                            key: 'stats-grid',
                            className: 'grid md:grid-cols-4 gap-6'
                        }, [
                            React.createElement('div', {
                                key: 'users-stat',
                                className: 'card text-center'
                            }, [
                                React.createElement('div', {
                                    key: 'icon',
                                    className: 'text-3xl mb-2'
                                }, '👥'),
                                React.createElement('h3', {
                                    key: 'number',
                                    className: 'text-2xl font-bold text-gray-800'
                                }, '1,234'),
                                React.createElement('p', {
                                    key: 'label',
                                    className: 'text-gray-600'
                                }, '총 회원수')
                            ]),
                            React.createElement('div', {
                                key: 'experts-stat',
                                className: 'card text-center'
                            }, [
                                React.createElement('div', {
                                    key: 'icon',
                                    className: 'text-3xl mb-2'
                                }, '👨‍💼'),
                                React.createElement('h3', {
                                    key: 'number',
                                    className: 'text-2xl font-bold text-gray-800'
                                }, '89'),
                                React.createElement('p', {
                                    key: 'label',
                                    className: 'text-gray-600'
                                }, '활성 전문가')
                            ]),
                            React.createElement('div', {
                                key: 'consultations-stat',
                                className: 'card text-center'
                            }, [
                                React.createElement('div', {
                                    key: 'icon',
                                    className: 'text-3xl mb-2'
                                }, '💼'),
                                React.createElement('h3', {
                                    key: 'number',
                                    className: 'text-2xl font-bold text-gray-800'
                                }, '456'),
                                React.createElement('p', {
                                    key: 'label',
                                    className: 'text-gray-600'
                                }, '이번달 상담')
                            ]),
                            React.createElement('div', {
                                key: 'revenue-stat',
                                className: 'card text-center'
                            }, [
                                React.createElement('div', {
                                    key: 'icon',
                                    className: 'text-3xl mb-2'
                                }, '💰'),
                                React.createElement('h3', {
                                    key: 'number',
                                    className: 'text-2xl font-bold text-gray-800'
                                }, '2.1M'),
                                React.createElement('p', {
                                    key: 'label',
                                    className: 'text-gray-600'
                                }, '월간 수수료 (원)')
                            ])
                        ]),

                        React.createElement('div', {
                            key: 'chart-placeholder',
                            className: 'card text-center py-12'
                        }, [
                            React.createElement('div', {
                                key: 'icon',
                                className: 'text-4xl mb-4'
                            }, '📈'),
                            React.createElement('h3', {
                                key: 'title',
                                className: 'text-lg font-semibold text-gray-800 mb-2'
                            }, '상세 통계 차트'),
                            React.createElement('p', {
                                key: 'desc',
                                className: 'text-gray-600'
                            }, '월별 매출, 사용자 증가 추이 등 상세 통계 차트 개발 예정')
                        ])
                    ]) : null
                ])
            ]);
        };

        // 계산기 1단계: 기본정보 렌더링
        const renderStep1BasicInfo = (data, updateFn) => {
            return React.createElement('div', {
                className: 'card max-w-2xl mx-auto'
            }, [
                React.createElement('h3', {
                    key: 'title',
                    className: 'text-2xl font-bold text-gray-800 mb-6 text-center'
                }, '📋 1단계: 기본 정보'),
                
                React.createElement('div', {
                    key: 'form',
                    className: 'space-y-4'
                }, [
                    // 나이 입력
                    React.createElement('div', {
                        key: 'age-group'
                    }, [
                        React.createElement('label', {
                            key: 'age-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '나이'),
                        React.createElement('input', {
                            key: 'age-input',
                            type: 'number',
                            value: data?.age || '',
                            onChange: (e) => updateFn(1, 'age', parseInt(e.target.value) || null),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base',
                            placeholder: '만 나이를 입력하세요'
                        })
                    ]),
                    
                    // 학력 선택
                    React.createElement('div', {
                        key: 'education-group'
                    }, [
                        React.createElement('label', {
                            key: 'education-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '최종 학력'),
                        React.createElement('select', {
                            key: 'education-select',
                            value: data?.education || '',
                            onChange: (e) => updateFn(1, 'education', e.target.value),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base'
                        }, [
                            React.createElement('option', { key: 'edu-empty', value: '' }, '선택하세요'),
                            React.createElement('option', { key: 'edu-high', value: 'high_school' }, '고등학교 졸업'),
                            React.createElement('option', { key: 'edu-college', value: 'college' }, '전문대 졸업'),
                            React.createElement('option', { key: 'edu-university', value: 'university' }, '대학교 졸업'),
                            React.createElement('option', { key: 'edu-graduate', value: 'graduate' }, '대학원 졸업')
                        ])
                    ]),
                    
                    // 희망 직무
                    React.createElement('div', {
                        key: 'target-job-group'
                    }, [
                        React.createElement('label', {
                            key: 'target-job-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '희망 직무'),
                        React.createElement('select', {
                            key: 'target-job-select',
                            value: data?.targetJob || '',
                            onChange: (e) => updateFn(1, 'targetJob', e.target.value),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base'
                        }, [
                            React.createElement('option', { key: 'job-empty', value: '' }, '선택하세요'),
                            React.createElement('option', { key: 'job-dev', value: 'developer' }, '개발자'),
                            React.createElement('option', { key: 'job-designer', value: 'designer' }, '디자이너'),
                            React.createElement('option', { key: 'job-pm', value: 'product_manager' }, '기획자/PM'),
                            React.createElement('option', { key: 'job-marketing', value: 'marketing' }, '마케팅'),
                            React.createElement('option', { key: 'job-sales', value: 'sales' }, '영업'),
                            React.createElement('option', { key: 'job-finance', value: 'finance' }, '경영/재무'),
                            React.createElement('option', { key: 'job-hr', value: 'hr' }, '인사'),
                            React.createElement('option', { key: 'job-other', value: 'other' }, '기타')
                        ])
                    ])
                ])
            ]);
        };

        // 계산기 2단계: 스킬/자격증 렌더링
        const renderStep2Skills = (data, updateFn) => {
            return React.createElement('div', {
                className: 'card max-w-2xl mx-auto'
            }, [
                React.createElement('h3', {
                    key: 'title',
                    className: 'text-2xl font-bold text-gray-800 mb-6 text-center'
                }, '🛠️ 2단계: 스킬 & 자격증'),
                
                React.createElement('div', {
                    key: 'form',
                    className: 'space-y-6'
                }, [
                    // 기술 스택
                    React.createElement('div', {
                        key: 'tech-skills-group'
                    }, [
                        React.createElement('label', {
                            key: 'tech-label',
                            className: 'block text-sm font-medium text-gray-700 mb-3'
                        }, '보유 기술 스택 (복수 선택 가능)'),
                        React.createElement('div', {
                            key: 'tech-grid',
                            className: 'grid grid-cols-2 sm:grid-cols-3 gap-2'
                        }, [
                            'JavaScript', 'Python', 'Java', 'React', 'Vue.js', 'Node.js', 
                            'HTML/CSS', 'SQL', 'Git', 'Figma', 'Photoshop', '기타'
                        ].map((skill, index) => {
                            const isSelected = (data?.technicalSkills || []).includes(skill);
                            return React.createElement('button', {
                                key: `tech-${index}`,
                                className: `px-3 py-2 rounded-lg text-sm font-medium transition-all ${
                                    isSelected 
                                    ? 'bg-green-500 text-white' 
                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                }`,
                                onClick: () => {
                                    const currentSkills = data?.technicalSkills || [];
                                    const newSkills = isSelected 
                                        ? currentSkills.filter(s => s !== skill)
                                        : [...currentSkills, skill];
                                    updateFn(2, 'technicalSkills', newSkills);
                                }
                            }, skill);
                        }))
                    ]),
                    
                    // 어학 능력
                    React.createElement('div', {
                        key: 'language-group'
                    }, [
                        React.createElement('label', {
                            key: 'lang-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '영어 능력'),
                        React.createElement('select', {
                            key: 'language-select',
                            value: data?.englishLevel || '',
                            onChange: (e) => updateFn(2, 'englishLevel', e.target.value),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base'
                        }, [
                            React.createElement('option', { key: 'lang-empty', value: '' }, '선택하세요'),
                            React.createElement('option', { key: 'lang-none', value: 'none' }, '영어 실력 없음'),
                            React.createElement('option', { key: 'lang-basic', value: 'basic' }, '기초 회화 가능'),
                            React.createElement('option', { key: 'lang-toeic-low', value: 'toeic_low' }, 'TOEIC 600-750'),
                            React.createElement('option', { key: 'lang-toeic-mid', value: 'toeic_mid' }, 'TOEIC 750-900'),
                            React.createElement('option', { key: 'lang-toeic-high', value: 'toeic_high' }, 'TOEIC 900+'),
                            React.createElement('option', { key: 'lang-opic', value: 'opic' }, 'OPIc IH 이상'),
                            React.createElement('option', { key: 'lang-native', value: 'native' }, '원어민 수준')
                        ])
                    ]),
                    
                    // 자격증 개수
                    React.createElement('div', {
                        key: 'cert-group'
                    }, [
                        React.createElement('label', {
                            key: 'cert-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '관련 자격증 개수'),
                        React.createElement('input', {
                            key: 'cert-input',
                            type: 'number',
                            value: data?.certificationCount || '',
                            onChange: (e) => updateFn(2, 'certificationCount', parseInt(e.target.value) || 0),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base',
                            placeholder: '보유한 자격증 개수를 입력하세요',
                            min: '0'
                        })
                    ])
                ])
            ]);
        };

        // 계산기 3단계: 경험 분석 렌더링
        const renderStep3Experience = (data, updateFn) => {
            return React.createElement('div', {
                className: 'card max-w-2xl mx-auto'
            }, [
                React.createElement('h3', {
                    key: 'title',
                    className: 'text-2xl font-bold text-gray-800 mb-6 text-center'
                }, '💼 3단계: 경험 분석'),
                
                React.createElement('div', {
                    key: 'form',
                    className: 'space-y-6'
                }, [
                    // 인턴십 경험
                    React.createElement('div', {
                        key: 'internship-group'
                    }, [
                        React.createElement('label', {
                            key: 'internship-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '인턴십 경험'),
                        React.createElement('select', {
                            key: 'internship-select',
                            value: data?.internshipExperience || '',
                            onChange: (e) => updateFn(3, 'internshipExperience', e.target.value),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base'
                        }, [
                            React.createElement('option', { key: 'intern-empty', value: '' }, '선택하세요'),
                            React.createElement('option', { key: 'intern-none', value: 'none' }, '인턴십 경험 없음'),
                            React.createElement('option', { key: 'intern-one', value: 'one' }, '1회 (1-3개월)'),
                            React.createElement('option', { key: 'intern-multiple', value: 'multiple' }, '2회 이상'),
                            React.createElement('option', { key: 'intern-long', value: 'long_term' }, '장기 인턴 (6개월+)')
                        ])
                    ]),
                    
                    // 프로젝트 경험
                    React.createElement('div', {
                        key: 'project-group'
                    }, [
                        React.createElement('label', {
                            key: 'project-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '개인/팀 프로젝트 수'),
                        React.createElement('input', {
                            key: 'project-input',
                            type: 'number',
                            value: data?.projectCount || '',
                            onChange: (e) => updateFn(3, 'projectCount', parseInt(e.target.value) || 0),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base',
                            placeholder: '완료한 프로젝트 개수',
                            min: '0'
                        })
                    ]),
                    
                    // 아르바이트/실무 경험
                    React.createElement('div', {
                        key: 'work-group'
                    }, [
                        React.createElement('label', {
                            key: 'work-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '관련 업무 경험 (개월)'),
                        React.createElement('input', {
                            key: 'work-input',
                            type: 'number',
                            value: data?.workExperienceMonths || '',
                            onChange: (e) => updateFn(3, 'workExperienceMonths', parseInt(e.target.value) || 0),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base',
                            placeholder: '아르바이트, 프리랜서 등 업무 경험 개월 수',
                            min: '0'
                        })
                    ]),
                    
                    // 수상 경력
                    React.createElement('div', {
                        key: 'award-group'
                    }, [
                        React.createElement('label', {
                            key: 'award-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '수상 경력'),
                        React.createElement('select', {
                            key: 'award-select',
                            value: data?.awards || '',
                            onChange: (e) => updateFn(3, 'awards', e.target.value),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base'
                        }, [
                            React.createElement('option', { key: 'award-empty', value: '' }, '선택하세요'),
                            React.createElement('option', { key: 'award-none', value: 'none' }, '수상 경력 없음'),
                            React.createElement('option', { key: 'award-school', value: 'school' }, '교내 수상'),
                            React.createElement('option', { key: 'award-external', value: 'external' }, '교외 대회 입상'),
                            React.createElement('option', { key: 'award-national', value: 'national' }, '전국 대회 수상'),
                            React.createElement('option', { key: 'award-international', value: 'international' }, '국제 대회 수상')
                        ])
                    ])
                ])
            ]);
        };

        // 계산기 4단계: 네트워크 & 소셜 렌더링
        const renderStep4Network = (data, updateFn) => {
            return React.createElement('div', {
                className: 'card max-w-2xl mx-auto'
            }, [
                React.createElement('h3', {
                    key: 'title',
                    className: 'text-2xl font-bold text-gray-800 mb-6 text-center'
                }, '🤝 4단계: 네트워크 & 소셜'),
                
                React.createElement('div', {
                    key: 'form',
                    className: 'space-y-6'
                }, [
                    // LinkedIn 보유 여부
                    React.createElement('div', {
                        key: 'linkedin-group'
                    }, [
                        React.createElement('label', {
                            key: 'linkedin-label',
                            className: 'block text-sm font-medium text-gray-700 mb-3'
                        }, 'LinkedIn 프로필'),
                        React.createElement('div', {
                            key: 'linkedin-options',
                            className: 'space-y-2'
                        }, [
                            React.createElement('label', {
                                key: 'linkedin-none',
                                className: 'flex items-center cursor-pointer'
                            }, [
                                React.createElement('input', {
                                    key: 'linkedin-none-radio',
                                    type: 'radio',
                                    name: 'linkedinStatus',
                                    value: 'none',
                                    checked: data?.linkedinStatus === 'none',
                                    onChange: (e) => updateFn(4, 'linkedinStatus', e.target.value),
                                    className: 'mr-2'
                                }),
                                'LinkedIn 없음'
                            ]),
                            React.createElement('label', {
                                key: 'linkedin-basic',
                                className: 'flex items-center cursor-pointer'
                            }, [
                                React.createElement('input', {
                                    key: 'linkedin-basic-radio',
                                    type: 'radio',
                                    name: 'linkedinStatus',
                                    value: 'basic',
                                    checked: data?.linkedinStatus === 'basic',
                                    onChange: (e) => updateFn(4, 'linkedinStatus', e.target.value),
                                    className: 'mr-2'
                                }),
                                '기본 프로필만 있음'
                            ]),
                            React.createElement('label', {
                                key: 'linkedin-complete',
                                className: 'flex items-center cursor-pointer'
                            }, [
                                React.createElement('input', {
                                    key: 'linkedin-complete-radio',
                                    type: 'radio',
                                    name: 'linkedinStatus',
                                    value: 'complete',
                                    checked: data?.linkedinStatus === 'complete',
                                    onChange: (e) => updateFn(4, 'linkedinStatus', e.target.value),
                                    className: 'mr-2'
                                }),
                                '완전히 작성됨 (경험, 스킬 등)'
                            ])
                        ])
                    ]),
                    
                    // GitHub/포트폴리오 보유
                    React.createElement('div', {
                        key: 'portfolio-group'
                    }, [
                        React.createElement('label', {
                            key: 'portfolio-label',
                            className: 'block text-sm font-medium text-gray-700 mb-3'
                        }, '온라인 포트폴리오 (복수 선택 가능)'),
                        React.createElement('div', {
                            key: 'portfolio-grid',
                            className: 'grid grid-cols-2 gap-2'
                        }, [
                            'GitHub', 'Behance', '개인 블로그', '포트폴리오 사이트', 'Notion', '기타'
                        ].map((platform, index) => {
                            const isSelected = (data?.portfolioPlatforms || []).includes(platform);
                            return React.createElement('button', {
                                key: `portfolio-${index}`,
                                className: `px-3 py-2 rounded-lg text-sm font-medium transition-all ${
                                    isSelected 
                                    ? 'bg-blue-500 text-white' 
                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                }`,
                                onClick: () => {
                                    const currentPlatforms = data?.portfolioPlatforms || [];
                                    const newPlatforms = isSelected 
                                        ? currentPlatforms.filter(p => p !== platform)
                                        : [...currentPlatforms, platform];
                                    updateFn(4, 'portfolioPlatforms', newPlatforms);
                                }
                            }, platform);
                        }))
                    ]),
                    
                    // 업계 인맥 수
                    React.createElement('div', {
                        key: 'network-group'
                    }, [
                        React.createElement('label', {
                            key: 'network-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '업계 인맥'),
                        React.createElement('select', {
                            key: 'network-select',
                            value: data?.industryNetwork || '',
                            onChange: (e) => updateFn(4, 'industryNetwork', e.target.value),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base'
                        }, [
                            React.createElement('option', { key: 'network-empty', value: '' }, '선택하세요'),
                            React.createElement('option', { key: 'network-none', value: 'none' }, '업계 인맥 없음'),
                            React.createElement('option', { key: 'network-few', value: 'few' }, '1-3명 정도'),
                            React.createElement('option', { key: 'network-some', value: 'some' }, '4-10명'),
                            React.createElement('option', { key: 'network-many', value: 'many' }, '10명 이상'),
                            React.createElement('option', { key: 'network-extensive', value: 'extensive' }, '광범위한 네트워크')
                        ])
                    ]),
                    
                    // 추천서 가능성
                    React.createElement('div', {
                        key: 'reference-group'
                    }, [
                        React.createElement('label', {
                            key: 'reference-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '추천서 받을 수 있는 사람'),
                        React.createElement('select', {
                            key: 'reference-select',
                            value: data?.referenceAvailable || '',
                            onChange: (e) => updateFn(4, 'referenceAvailable', e.target.value),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base'
                        }, [
                            React.createElement('option', { key: 'ref-empty', value: '' }, '선택하세요'),
                            React.createElement('option', { key: 'ref-none', value: 'none' }, '추천서 요청 불가'),
                            React.createElement('option', { key: 'ref-professor', value: 'professor' }, '교수님'),
                            React.createElement('option', { key: 'ref-supervisor', value: 'supervisor' }, '직장 상사'),
                            React.createElement('option', { key: 'ref-both', value: 'both' }, '교수님 + 직장 상사'),
                            React.createElement('option', { key: 'ref-multiple', value: 'multiple' }, '여러명 가능')
                        ])
                    ])
                ])
            ]);
        };

        // 계산기 5단계: 취업 준비 현황 렌더링
        const renderStep5Preparation = (data, updateFn) => {
            return React.createElement('div', {
                className: 'card max-w-2xl mx-auto'
            }, [
                React.createElement('h3', {
                    key: 'title',
                    className: 'text-2xl font-bold text-gray-800 mb-6 text-center'
                }, '📝 5단계: 취업 준비 현황'),
                
                React.createElement('div', {
                    key: 'form',
                    className: 'space-y-6'
                }, [
                    // 이력서 완성도
                    React.createElement('div', {
                        key: 'resume-group'
                    }, [
                        React.createElement('label', {
                            key: 'resume-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '이력서 완성도'),
                        React.createElement('select', {
                            key: 'resume-select',
                            value: data?.resumeStatus || '',
                            onChange: (e) => updateFn(5, 'resumeStatus', e.target.value),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base'
                        }, [
                            React.createElement('option', { key: 'resume-empty', value: '' }, '선택하세요'),
                            React.createElement('option', { key: 'resume-none', value: 'none' }, '이력서 없음'),
                            React.createElement('option', { key: 'resume-draft', value: 'draft' }, '초안 작성 중'),
                            React.createElement('option', { key: 'resume-basic', value: 'basic' }, '기본 완성'),
                            React.createElement('option', { key: 'resume-polished', value: 'polished' }, '완벽하게 다듬어짐'),
                            React.createElement('option', { key: 'resume-expert', value: 'expert' }, '전문가 검토 완료')
                        ])
                    ]),
                    
                    // 자기소개서 준비도
                    React.createElement('div', {
                        key: 'coverletter-group'
                    }, [
                        React.createElement('label', {
                            key: 'coverletter-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '자기소개서 준비도'),
                        React.createElement('select', {
                            key: 'coverletter-select',
                            value: data?.coverLetterStatus || '',
                            onChange: (e) => updateFn(5, 'coverLetterStatus', e.target.value),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base'
                        }, [
                            React.createElement('option', { key: 'cover-empty', value: '' }, '선택하세요'),
                            React.createElement('option', { key: 'cover-none', value: 'none' }, '준비하지 않음'),
                            React.createElement('option', { key: 'cover-template', value: 'template' }, '기본 템플릿 사용'),
                            React.createElement('option', { key: 'cover-customized', value: 'customized' }, '기업별 맞춤 작성'),
                            React.createElement('option', { key: 'cover-multiple', value: 'multiple' }, '여러 버전 준비'),
                            React.createElement('option', { key: 'cover-expert', value: 'expert' }, '전문가 첨삭 완료')
                        ])
                    ]),
                    
                    // 면접 준비 상태
                    React.createElement('div', {
                        key: 'interview-group'
                    }, [
                        React.createElement('label', {
                            key: 'interview-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '면접 준비 상태'),
                        React.createElement('select', {
                            key: 'interview-select',
                            value: data?.interviewPreparation || '',
                            onChange: (e) => updateFn(5, 'interviewPreparation', e.target.value),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base'
                        }, [
                            React.createElement('option', { key: 'interview-empty', value: '' }, '선택하세요'),
                            React.createElement('option', { key: 'interview-none', value: 'none' }, '준비하지 않음'),
                            React.createElement('option', { key: 'interview-basic', value: 'basic' }, '기본 답변 준비'),
                            React.createElement('option', { key: 'interview-practice', value: 'practice' }, '모의면접 경험'),
                            React.createElement('option', { key: 'interview-multiple', value: 'multiple' }, '여러 번 모의면접'),
                            React.createElement('option', { key: 'interview-professional', value: 'professional' }, '전문 코칭 받음')
                        ])
                    ]),
                    
                    // 지원한 회사 수
                    React.createElement('div', {
                        key: 'application-group'
                    }, [
                        React.createElement('label', {
                            key: 'application-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '지원한 회사 수'),
                        React.createElement('input', {
                            key: 'application-input',
                            type: 'number',
                            value: data?.applicationCount || '',
                            onChange: (e) => updateFn(5, 'applicationCount', parseInt(e.target.value) || 0),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base',
                            placeholder: '현재까지 지원한 회사 수',
                            min: '0'
                        })
                    ]),
                    
                    // 취업 준비 기간
                    React.createElement('div', {
                        key: 'preparation-period-group'
                    }, [
                        React.createElement('label', {
                            key: 'preparation-label',
                            className: 'block text-sm font-medium text-gray-700 mb-2'
                        }, '취업 준비 기간 (개월)'),
                        React.createElement('input', {
                            key: 'preparation-input',
                            type: 'number',
                            value: data?.preparationMonths || '',
                            onChange: (e) => updateFn(5, 'preparationMonths', parseInt(e.target.value) || 0),
                            className: 'w-full px-4 py-3 border border-gray-300 rounded-lg text-base',
                            placeholder: '본격적으로 취업준비를 시작한 개월 수',
                            min: '0'
                        })
                    ])
                ])
            ]);
        };

        // 점수 계산 로직
        const calculateCareerScore = (allData) => {
            let totalScore = 0;
            const breakdown = {};

            // 1단계: 기본정보 (10점)
            let basicScore = 0;
            const step1 = allData.step1 || {};
            if (step1.age >= 20 && step1.age <= 35) basicScore += 3; // 적정 연령
            if (step1.education === 'university' || step1.education === 'graduate') basicScore += 4;
            if (step1.targetJob) basicScore += 3;
            breakdown.basic = Math.min(basicScore, 10);

            // 2단계: 스킬 (25점)
            let skillScore = 0;
            const step2 = allData.step2 || {};
            skillScore += Math.min((step2.technicalSkills || []).length * 2, 12); // 기술스택
            if (step2.englishLevel === 'toeic_high' || step2.englishLevel === 'native') skillScore += 8;
            else if (step2.englishLevel === 'toeic_mid' || step2.englishLevel === 'opic') skillScore += 5;
            else if (step2.englishLevel === 'toeic_low' || step2.englishLevel === 'basic') skillScore += 2;
            skillScore += Math.min((step2.certificationCount || 0) * 1, 5); // 자격증
            breakdown.skills = Math.min(skillScore, 25);

            // 3단계: 경험 (25점)
            let expScore = 0;
            const step3 = allData.step3 || {};
            if (step3.internshipExperience === 'long_term') expScore += 10;
            else if (step3.internshipExperience === 'multiple') expScore += 8;
            else if (step3.internshipExperience === 'one') expScore += 5;
            expScore += Math.min((step3.projectCount || 0) * 2, 8); // 프로젝트
            expScore += Math.min((step3.workExperienceMonths || 0) * 0.3, 5); // 업무경험
            if (step3.awards === 'international') expScore += 8;
            else if (step3.awards === 'national') expScore += 6;
            else if (step3.awards === 'external') expScore += 4;
            else if (step3.awards === 'school') expScore += 2;
            breakdown.experience = Math.min(expScore, 25);

            // 4단계: 네트워크 (15점)
            let networkScore = 0;
            const step4 = allData.step4 || {};
            if (step4.linkedinStatus === 'complete') networkScore += 5;
            else if (step4.linkedinStatus === 'basic') networkScore += 2;
            networkScore += Math.min((step4.portfolioPlatforms || []).length * 1, 4); // 포트폴리오
            if (step4.industryNetwork === 'extensive') networkScore += 4;
            else if (step4.industryNetwork === 'many') networkScore += 3;
            else if (step4.industryNetwork === 'some') networkScore += 2;
            else if (step4.industryNetwork === 'few') networkScore += 1;
            if (step4.referenceAvailable === 'multiple') networkScore += 3;
            else if (step4.referenceAvailable === 'both') networkScore += 2;
            else if (step4.referenceAvailable === 'supervisor' || step4.referenceAvailable === 'professor') networkScore += 1;
            breakdown.network = Math.min(networkScore, 15);

            // 5단계: 준비도 (25점)
            let prepScore = 0;
            const step5 = allData.step5 || {};
            if (step5.resumeStatus === 'expert') prepScore += 8;
            else if (step5.resumeStatus === 'polished') prepScore += 6;
            else if (step5.resumeStatus === 'basic') prepScore += 4;
            else if (step5.resumeStatus === 'draft') prepScore += 2;
            
            if (step5.coverLetterStatus === 'expert') prepScore += 6;
            else if (step5.coverLetterStatus === 'multiple') prepScore += 5;
            else if (step5.coverLetterStatus === 'customized') prepScore += 4;
            else if (step5.coverLetterStatus === 'template') prepScore += 2;
            
            if (step5.interviewPreparation === 'professional') prepScore += 6;
            else if (step5.interviewPreparation === 'multiple') prepScore += 4;
            else if (step5.interviewPreparation === 'practice') prepScore += 3;
            else if (step5.interviewPreparation === 'basic') prepScore += 1;
            
            prepScore += Math.min((step5.applicationCount || 0) * 0.2, 3); // 지원 수
            prepScore += Math.min((step5.preparationMonths || 0) * 0.5, 2); // 준비기간
            breakdown.preparation = Math.min(prepScore, 25);

            // 총점 계산
            totalScore = breakdown.basic + breakdown.skills + breakdown.experience + breakdown.network + breakdown.preparation;

            // 등급 계산
            let grade = '';
            if (totalScore >= 90) grade = 'S급 (최상위 1%)';
            else if (totalScore >= 80) grade = 'A급 (상위 10%)';
            else if (totalScore >= 70) grade = 'B급 (상위 30%)';
            else if (totalScore >= 60) grade = 'C급 (상위 50%)';
            else if (totalScore >= 50) grade = 'D급 (상위 70%)';
            else grade = 'F급 (하위 30%)';

            return {
                totalScore: Math.round(totalScore),
                breakdown,
                grade,
                maxScore: 100
            };
        };

        // 계산 결과 저장 함수
        const saveCalculationResult = async (resultData) => {
            try {
                if (isAuthenticated) {
                    // 인증된 사용자: Supabase에 저장
                    const { error } = await supabaseClient
                        .from('career_calculations')
                        .insert({
                            user_id: currentUser.id,
                            step1_basic_info: calculatorData.step1 || {},
                            step2_skills: calculatorData.step2 || {},
                            step3_experience: calculatorData.step3 || {},
                            step4_network: calculatorData.step4 || {},
                            step5_preparation: calculatorData.step5 || {},
                            total_score: resultData.totalScore,
                            grade: resultData.grade,
                            breakdown: resultData.breakdown
                        });
                        
                    if (error) throw error;
                    alert('✅ 진단 결과가 저장되었습니다!');
                } else {
                    // 게스트 사용자: 로컬 스토리지에 저장
                    const guestResult = {
                        calculatorData,
                        result: resultData,
                        timestamp: new Date().toISOString()
                    };
                    localStorage.setItem('career_calculation_guest', JSON.stringify(guestResult));
                    
                    if (confirm('진단이 완료되었습니다! 회원가입하시면 결과를 영구적으로 저장하고 다른 기능도 이용할 수 있습니다. 회원가입 하시겠습니까?')) {
                        setCurrentView('auth');
                        setAuthMode('signup');
                    }
                }
            } catch (error) {
                console.error('Save error:', error);
                alert(`저장 실패: ${error.message}`);
            }
        };

        // 6단계: 결과 화면 렌더링
        const renderStep6Results = () => {
            const result = calculateCareerScore(calculatorData);
            
            return React.createElement('div', {
                className: 'max-w-4xl mx-auto space-y-6'
            }, [
                // 메인 결과 카드
                React.createElement('div', {
                    key: 'main-result',
                    className: 'card bg-gradient-to-r from-green-50 to-blue-50'
                }, [
                    React.createElement('div', {
                        key: 'result-header',
                        className: 'text-center mb-8'
                    }, [
                        React.createElement('h2', {
                            key: 'title',
                            className: 'text-3xl font-bold text-gray-800 mb-4'
                        }, '🎯 취업경쟁력 진단 결과'),
                        
                        React.createElement('div', {
                            key: 'score-display',
                            className: 'flex justify-center items-center mb-6'
                        }, [
                            React.createElement('div', {
                                key: 'score-circle',
                                className: 'w-32 h-32 rounded-full border-8 border-green-200 flex items-center justify-center bg-white shadow-lg'
                            }, [
                                React.createElement('div', {
                                    key: 'score-content',
                                    className: 'text-center'
                                }, [
                                    React.createElement('div', {
                                        key: 'score-number',
                                        className: 'text-4xl font-bold text-green-600'
                                    }, result.totalScore),
                                    React.createElement('div', {
                                        key: 'score-max',
                                        className: 'text-sm text-gray-500'
                                    }, '/ 100')
                                ])
                            ])
                        ]),
                        
                        React.createElement('div', {
                            key: 'grade',
                            className: 'text-2xl font-bold text-blue-600 mb-6'
                        }, result.grade)
                    ])
                ]),
                
                // 상세 분석 차트
                React.createElement('div', {
                    key: 'detailed-analysis',
                    className: 'card'
                }, [
                    React.createElement('h3', {
                        key: 'analysis-title',
                        className: 'text-xl font-bold text-gray-800 mb-6 text-center'
                    }, '📊 영역별 상세 분석'),
                    
                    React.createElement('div', {
                        key: 'breakdown-bars',
                        className: 'space-y-4'
                    }, [
                        {label: '📋 기본정보', key: 'basic', max: 10},
                        {label: '🛠️ 스킬/자격증', key: 'skills', max: 25},
                        {label: '💼 경험', key: 'experience', max: 25},
                        {label: '🤝 네트워크', key: 'network', max: 15},
                        {label: '📝 준비도', key: 'preparation', max: 25}
                    ].map((item) => {
                        const score = result.breakdown[item.key] || 0;
                        const percentage = (score / item.max) * 100;
                        return React.createElement('div', {
                            key: item.key,
                            className: 'mb-4'
                        }, [
                            React.createElement('div', {
                                key: 'label',
                                className: 'flex justify-between mb-2'
                            }, [
                                React.createElement('span', {
                                    key: 'name',
                                    className: 'font-medium text-gray-700'
                                }, item.label),
                                React.createElement('span', {
                                    key: 'score',
                                    className: 'font-bold text-blue-600'
                                }, `${score}/${item.max}점`)
                            ]),
                            React.createElement('div', {
                                key: 'bar-container',
                                className: 'w-full bg-gray-200 rounded-full h-4'
                            }, [
                                React.createElement('div', {
                                    key: 'bar-fill',
                                    className: 'bg-gradient-to-r from-green-400 to-blue-500 h-4 rounded-full transition-all duration-1000',
                                    style: { width: `${percentage}%` }
                                })
                            ])
                        ]);
                    }))
                ]),
                
                // 액션 버튼들
                React.createElement('div', {
                    key: 'action-buttons',
                    className: 'card text-center'
                }, [
                    React.createElement('h3', {
                        key: 'action-title',
                        className: 'text-lg font-semibold text-gray-800 mb-4'
                    }, '다음 단계'),
                    
                    React.createElement('div', {
                        key: 'button-grid',
                        className: 'grid grid-cols-1 md:grid-cols-3 gap-4'
                    }, [
                        React.createElement('button', {
                            key: 'save-btn',
                            className: 'btn-primary py-3',
                            onClick: () => saveCalculationResult(result)
                        }, isAuthenticated ? '💾 결과 저장하기' : '💾 결과 저장 (회원가입)'),
                        
                        React.createElement('button', {
                            key: 'community-btn',
                            className: 'btn-secondary py-3',
                            onClick: () => {
                                if (isAuthenticated) {
                                    setCurrentView('community');
                                } else {
                                    alert('커뮤니티는 회원가입 후 이용가능합니다!');
                                    setCurrentView('auth');
                                }
                            }
                        }, '💬 커뮤니티 참여'),
                        
                        React.createElement('button', {
                            key: 'expert-btn',
                            className: 'bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg font-medium hover:shadow-lg transition-all',
                            onClick: () => alert('전문가 상담 기능 개발 예정! 👨‍💼')
                        }, '👨‍💼 전문가 상담')
                    ])
                ])
            ]);
        };

        // 계산기 메인 뷰 렌더링
        const renderCalculatorView = () => {
            const currentStepData = calculatorData[`step${calculatorStep}`] || {};
            
            return React.createElement('div', {
                className: 'min-h-screen bg-gradient-to-br from-green-50 to-blue-50'
            }, [
                // 헤더 with 뒤로가기
                React.createElement('header', {
                    key: 'calc-header',
                    className: 'bg-white shadow-sm border-b'
                }, React.createElement('div', {
                    className: 'max-w-7xl mx-auto px-4 py-6'
                }, [
                    React.createElement('div', {
                        key: 'header-content',
                        className: 'flex items-center justify-between'
                    }, [
                        React.createElement('button', {
                            key: 'back-btn',
                            className: 'text-gray-600 hover:text-gray-800 text-lg',
                            onClick: () => setCurrentView('home')
                        }, '← 홈으로'),
                        React.createElement('h1', {
                            key: 'calc-title',
                            className: 'text-2xl font-bold text-gray-900'
                        }, '🧮 취업경쟁력 진단'),
                        React.createElement('div', {
                            key: 'step-indicator',
                            className: 'text-sm text-gray-500'
                        }, `${calculatorStep}/6 단계`)
                    ])
                ])),
                
                // 메인 계산기 컨텐츠
                React.createElement('main', {
                    key: 'calc-main',
                    className: 'max-w-4xl mx-auto px-4 py-12'
                }, [
                    // 진행 바
                    React.createElement('div', {
                        key: 'progress',
                        className: 'mb-8'
                    }, [
                        React.createElement('div', {
                            key: 'progress-bar',
                            className: 'w-full bg-gray-200 rounded-full h-3'
                        }, [
                            React.createElement('div', {
                                key: 'progress-fill',
                                className: 'bg-green-500 h-3 rounded-full transition-all duration-500',
                                style: { width: `${(calculatorStep / 6) * 100}%` }
                            })
                        ])
                    ]),
                    
                    // 단계별 폼 렌더링
                    calculatorStep === 1 ? renderStep1BasicInfo(currentStepData, updateCalculatorData) :
                    calculatorStep === 2 ? renderStep2Skills(currentStepData, updateCalculatorData) : 
                    calculatorStep === 3 ? renderStep3Experience(currentStepData, updateCalculatorData) :
                    calculatorStep === 4 ? renderStep4Network(currentStepData, updateCalculatorData) :
                    calculatorStep === 5 ? renderStep5Preparation(currentStepData, updateCalculatorData) :
                    calculatorStep === 6 ? renderStep6Results() :
                    React.createElement('div', {
                        key: 'placeholder',
                        className: 'card max-w-2xl mx-auto text-center'
                    }, [
                        React.createElement('h3', {
                            key: 'title',
                            className: 'text-2xl font-bold text-gray-800 mb-4'
                        }, `${calculatorStep}단계 개발 중...`),
                        React.createElement('p', {
                            key: 'desc',
                            className: 'text-gray-600'
                        }, '이 단계는 곧 개발될 예정입니다!')
                    ]),
                    
                    // 네비게이션 버튼
                    React.createElement('div', {
                        key: 'nav-buttons',
                        className: 'flex justify-between mt-8 max-w-2xl mx-auto'
                    }, [
                        React.createElement('button', {
                            key: 'prev-btn',
                            className: calculatorStep === 1 ? 'invisible' : 'btn-secondary px-6 py-3',
                            onClick: () => setCalculatorStep(prev => Math.max(1, prev - 1))
                        }, '이전'),
                        React.createElement('button', {
                            key: 'next-btn',
                            className: 'btn-primary px-6 py-3',
                            onClick: () => {
                                if (calculatorStep < 6) {
                                    setCalculatorStep(prev => prev + 1);
                                } else {
                                    // 처음부터 다시 시작
                                    setCalculatorStep(1);
                                    setCalculatorData({});
                                }
                            }
                        }, calculatorStep === 6 ? '🔄 다시 진단하기' : '다음')
                    ])
                ])
            ]);
        };

        // 취업경쟁력 계산 알고리즘
        const calculateCareerScore = (data) => {
            let totalScore = 0;
            let details = {
                basicInfo: 0,
                skills: 0, 
                experience: 0,
                network: 0,
                preparation: 0,
                market: 0
            };

            // 1단계: 기본정보 (20점)
            if (data.step1) {
                let score = 0;
                if (data.step1.age >= 22 && data.step1.age <= 28) score += 5;
                if (data.step1.education === 'university' || data.step1.education === 'graduate') score += 8;
                if (data.step1.major) score += 4;
                if (data.step1.targetIndustry) score += 3;
                details.basicInfo = Math.min(score, 20);
            }

            // 2단계: 스킬역량 (20점) 
            if (data.step2) {
                let score = 0;
                if (data.step2.technicalSkills) score += 8;
                if (data.step2.certifications) score += 4;
                if (data.step2.languages) score += 4;
                if (data.step2.portfolio) score += 4;
                details.skills = Math.min(score, 20);
            }

            // 3단계: 경험분석 (20점)
            if (data.step3) {
                let score = 0;
                if (data.step3.internships) score += 8;
                if (data.step3.projects) score += 6;
                if (data.step3.activities) score += 4;
                if (data.step3.awards) score += 2;
                details.experience = Math.min(score, 20);
            }

            // 4단계: 네트워크 (15점)
            if (data.step4) {
                let score = 0;
                if (data.step4.connections) score += 6;
                if (data.step4.recommendations) score += 5;
                if (data.step4.mentors) score += 4;
                details.network = Math.min(score, 15);
            }

            // 5단계: 준비현황 (15점)
            if (data.step5) {
                let score = 0;
                if (data.step5.resume) score += 5;
                if (data.step5.coverLetter) score += 4;
                if (data.step5.interviewPrep) score += 3;
                if (data.step5.applications) score += 3;
                details.preparation = Math.min(score, 15);
            }

            // 6단계: 시장분석 (10점)
            if (data.step6) {
                let score = 0;
                if (data.step6.marketResearch) score += 4;
                if (data.step6.industryTrends) score += 3;
                if (data.step6.competitionAnalysis) score += 3;
                details.market = Math.min(score, 10);
            }

            totalScore = details.basicInfo + details.skills + details.experience + 
                        details.network + details.preparation + details.market;

            // 등급 계산
            let grade;
            if (totalScore >= 90) grade = 'S급';
            else if (totalScore >= 80) grade = 'A급';
            else if (totalScore >= 70) grade = 'B급';
            else if (totalScore >= 60) grade = 'C급';
            else if (totalScore >= 50) grade = 'D급';
            else grade = 'F급';

            return {
                totalScore,
                grade,
                details,
                recommendations: generateRecommendations(totalScore, details),
                successRate: Math.min(Math.round(totalScore * 0.8), 95)
            };
        };

        // 개선 추천사항 생성
        const generateRecommendations = (totalScore, details) => {
            const recommendations = [];
            
            if (details.skills < 15) {
                recommendations.push('기술 스킬 강화를 위한 온라인 강의 수강을 추천합니다.');
            }
            if (details.experience < 15) {
                recommendations.push('인턴십이나 프로젝트 경험을 늘려보세요.');
            }
            if (details.network < 10) {
                recommendations.push('업계 네트워킹 이벤트에 적극 참여하세요.');
            }
            if (details.preparation < 10) {
                recommendations.push('이력서와 자기소개서를 전문적으로 검토받아보세요.');
            }
            
            return recommendations;
        };

        // 인사이드잡 메인 앱 컴포넌트
        const InsideJobApp = () => {
            const [isLoading, setIsLoading] = React.useState(true);
            const [connectionStatus, setConnectionStatus] = React.useState('connecting');
            const [currentView, setCurrentView] = React.useState('home');
            const [selectedBooking, setSelectedBooking] = React.useState(null);
            const [authMode, setAuthMode] = React.useState('login'); // login, signup
            const [calculatorStep, setCalculatorStep] = React.useState(1);
            const [calculatorData, setCalculatorData] = React.useState({});
            const [currentUser, setCurrentUser] = React.useState(null);
            const [isAuthenticated, setIsAuthenticated] = React.useState(false);
            
            // 상담 예약 시스템 상태
            const [consultationDuration, setConsultationDuration] = React.useState(30);
            const [selectedExpert, setSelectedExpert] = React.useState(null);
            const [systemSettings, setSystemSettings] = React.useState({
                commissionRate: 0.20,
                availableTimeUnits: [10, 20, 30, 40, 50, 60]
            });
            
            // 쪽지 시스템 상태
            const [messages, setMessages] = React.useState([]);
            const [selectedMessage, setSelectedMessage] = React.useState(null);
            
            // 사용자 역할 상태
            const [userRole, setUserRole] = React.useState('member'); // admin, member, expert
            const [authMode, setAuthMode] = React.useState('login'); // login, signup
            
            // 시스템 설정 불러오기
            const loadSystemSettings = React.useCallback(async () => {
                try {
                    const { data, error } = await supabaseClient
                        .from('system_settings')
                        .select('*');
                    
                    if (!error && data) {
                        const settingsMap = {};
                        data.forEach(setting => {
                            let value = setting.setting_value;
                            if (setting.setting_type === 'number') {
                                value = parseFloat(value);
                            } else if (setting.setting_type === 'boolean') {
                                value = value === 'true';
                            } else if (setting.setting_type === 'json') {
                                try {
                                    value = JSON.parse(value);
                                } catch (e) {
                                    console.warn('JSON 파싱 오류:', setting.setting_key);
                                }
                            }
                            settingsMap[setting.setting_key] = value;
                        });
                        
                        setSystemSettings({
                            commissionRate: settingsMap.platform_commission_rate || 0.20,
                            availableTimeUnits: settingsMap.consultation_time_units || [10, 20, 30, 40, 50, 60],
                            minConsultationMinutes: settingsMap.min_consultation_minutes || 10,
                            maxConsultationMinutes: settingsMap.max_consultation_minutes || 60
                        });
                    }
                } catch (error) {
                    console.error('시스템 설정 로딩 오류:', error);
                }
            }, []);
            
            // 사용자 역할 확인
            const checkUserRole = React.useCallback(async (user) => {
                if (!user) return;
                
                try {
                    const { data, error } = await supabaseClient
                        .from('user_profiles')
                        .select('role')
                        .eq('user_id', user.id)
                        .single();
                    
                    if (!error && data) {
                        setUserRole(data.role || 'member');
                    }
                } catch (error) {
                    console.error('사용자 역할 확인 오류:', error);
                    setUserRole('member');
                }
            }, []);

            // Supabase 연결 테스트
            React.useEffect(() => {
                const testConnection = async () => {
                    try {
                        // 단순히 Supabase URL 연결 확인
                        if (supabaseClient && SUPABASE_URL && SUPABASE_ANON_KEY) {
                            console.log('✅ Supabase 클라이언트 초기화 성공!');
                            setConnectionStatus('connected');
                        } else {
                            console.error('Supabase 클라이언트 초기화 실패');
                            setConnectionStatus('error');
                        }
                    } catch (err) {
                        console.error('Connection test failed:', err);
                        setConnectionStatus('error');
                    } finally {
                        setTimeout(() => setIsLoading(false), 1500);
                    }
                };

                testConnection();
            }, []);

            // 게스트 데이터 마이그레이션
            const migrateGuestData = React.useCallback(async (userId) => {
                try {
                    const guestData = localStorage.getItem('career_calculation_guest');
                    if (guestData) {
                        const parsedData = JSON.parse(guestData);
                        const { error } = await supabaseClient
                            .from('career_calculations')
                            .insert({
                                user_id: userId,
                                step1_basic_info: parsedData.calculatorData.step1 || {},
                                step2_skills: parsedData.calculatorData.step2 || {},
                                step3_experience: parsedData.calculatorData.step3 || {},
                                step4_network: parsedData.calculatorData.step4 || {},
                                step5_preparation: parsedData.calculatorData.step5 || {},
                                total_score: parsedData.result.totalScore,
                                grade: parsedData.result.grade,
                                breakdown: parsedData.result.breakdown,
                                migrated_from_guest: true
                            });
                            
                        if (!error) {
                            localStorage.removeItem('career_calculation_guest');
                            alert('🎉 게스트 데이터가 성공적으로 이관되었습니다!');
                        }
                    }
                } catch (error) {
                    console.error('Guest data migration failed:', error);
                }
            }, []);

            // 사용자 인증 상태 체크
            React.useEffect(() => {
                const checkUser = async () => {
                    try {
                        const { data: { user } } = await supabaseClient.auth.getUser();
                        if (user) {
                            setCurrentUser(user);
                            setIsAuthenticated(true);
                            await Promise.all([
                                checkUserRole(user),
                                loadSystemSettings()
                            ]);
                            // 게스트 데이터 마이그레이션
                            await migrateGuestData(user.id);
                        }
                    } catch (error) {
                        console.error('Auth check error:', error);
                    }
                };

                checkUser();

                // 인증 상태 변화 감지
                const { data: { subscription } } = supabaseClient.auth.onAuthStateChange((event, session) => {
                    if (session?.user) {
                        setCurrentUser(session.user);
                        setIsAuthenticated(true);
                        checkUserRole(session.user);
                        loadSystemSettings();
                    } else {
                        setCurrentUser(null);
                        setIsAuthenticated(false);
                    }
                });

                return () => subscription.unsubscribe();
            }, []);

            // 로그인 함수
            const handleLogin = async (email, password) => {
                try {
                    const { data, error } = await supabaseClient.auth.signInWithPassword({
                        email,
                        password
                    });
                    
                    if (error) throw error;
                    
                    alert('로그인 성공!');
                    setCurrentView('home');
                } catch (error) {
                    alert(`로그인 실패: ${error.message}`);
                }
            };

            // 회원가입 함수
            const handleSignUp = async (email, password, nickname) => {
                try {
                    const { data, error } = await supabaseClient.auth.signUp({
                        email,
                        password,
                        options: {
                            data: {
                                nickname: nickname
                            }
                        }
                    });
                    
                    if (error) throw error;
                    
                    alert('회원가입 성공! 이메일 확인 후 로그인하세요.');
                    setAuthMode('login');
                } catch (error) {
                    alert(`회원가입 실패: ${error.message}`);
                }
            };

            // 로그아웃 함수
            const handleLogout = async () => {
                try {
                    const { error } = await supabaseClient.auth.signOut();
                    if (error) throw error;
                    
                    setCurrentView('home');
                    alert('로그아웃되었습니다.');
                } catch (error) {
                    alert(`로그아웃 실패: ${error.message}`);
                }
            };

            // 계산기 데이터 업데이트 (메모이제이션)
            const updateCalculatorData = React.useCallback((step, field, value) => {
                setCalculatorData(prev => ({
                    ...prev,
                    [`step${step}`]: {
                        ...prev[`step${step}`],
                        [field]: value
                    }
                }));
            }, []);

            // 결과 캐싱
            const calculationResult = React.useMemo(() => {
                if (Object.keys(calculatorData).length > 0) {
                    return calculateCareerScore(calculatorData);
                }
                return null;
            }, [calculatorData]);

            // 로딩 화면
            if (isLoading) {
                return React.createElement('div', {
                    className: 'flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-green-50 to-blue-50'
                }, [
                    React.createElement('div', {
                        key: 'spinner',
                        className: 'loading-spinner mb-4'
                    }),
                    React.createElement('div', {
                        key: 'text',
                        className: 'text-xl font-semibold text-gray-700'
                    }, '인사이드잡 시작 중...'),
                    React.createElement('div', {
                        key: 'status',
                        className: 'text-sm text-gray-500 mt-2'
                    }, connectionStatus === 'connecting' ? 'Supabase 연결 중...' : 
                       connectionStatus === 'connected' ? '연결 완료!' : '연결 오류')
                ]);
            }

            // 화면별 렌더링 로직
            if (currentView === 'calculator') {
                return renderCalculatorView();
            }
            if (currentView === 'community') {
                return renderCommunityView();
            }
            if (currentView === 'mypage') {
                return renderMyPageView();
            }
            if (currentView === 'consultation') {
                return renderConsultationView();
            }
            if (currentView === 'messages') {
                return renderMessagesView();
            }
            if (currentView === 'admin' && userRole === 'admin') {
                return renderAdminView();
            }
            if (currentView === 'consultation-chat') {
                return renderConsultationChatView(selectedBooking);
            }

            // 랜딩 페이지 렌더링 함수
            const renderLandingPage = () => {
                return React.createElement('div', {
                    className: 'min-h-screen bg-gradient-to-br from-green-50 to-blue-50'
                }, [
                    // 헤더
                    React.createElement('header', {
                        key: 'landing-header',
                        className: 'bg-white shadow-sm border-b'
                    }, React.createElement('div', {
                        className: 'max-w-7xl mx-auto px-4 py-6'
                    }, [
                        React.createElement('div', {
                            key: 'header-content',
                            className: 'flex items-center justify-between'
                        }, [
                            React.createElement('div', {
                                key: 'logo-area',
                                className: 'flex items-center space-x-3'
                            }, [
                                React.createElement('div', {
                                    key: 'logo',
                                    className: 'text-4xl'
                                }, '🎯'),
                                React.createElement('div', {
                                    key: 'title-area'
                                }, [
                                    React.createElement('h1', {
                                        key: 'title',
                                        className: 'text-2xl font-bold text-gray-900'
                                    }, '인사이드잡'),
                                    React.createElement('p', {
                                        key: 'subtitle',
                                        className: 'text-sm text-gray-500'
                                    }, 'by (주)오픈커넥트')
                                ])
                            ]),
                            React.createElement('div', {
                                key: 'header-actions',
                                className: 'flex items-center space-x-4'
                            }, [
                                React.createElement('div', {
                                    key: 'connection-badge',
                                    className: `px-3 py-1 rounded-full text-xs font-medium ${
                                        connectionStatus === 'connected' 
                                        ? 'bg-green-100 text-green-800'
                                        : 'bg-red-100 text-red-800'
                                    }`
                                }, connectionStatus === 'connected' ? '✅ 연결됨' : '❌ 연결 오류'),
                                
                                React.createElement('button', {
                                    key: 'login-btn',
                                    className: 'btn-primary text-sm px-6 py-2',
                                    onClick: () => setCurrentView('auth')
                                }, '로그인 / 회원가입')
                            ])
                        ])
                    ])),

                    // 랜딩 메인 컨텐츠 (플랜비 스타일)
                    React.createElement('main', {
                        key: 'landing-main',
                        className: 'max-w-6xl mx-auto px-4 py-8'
                    }, [
                        // 간단한 히어로 (플랜비 스타일)
                        React.createElement('div', {
                            key: 'hero-section',
                            className: 'text-center mb-12'
                        }, [
                            React.createElement('h1', {
                                key: 'hero-title',
                                className: 'text-3xl md:text-4xl font-bold text-gray-900 mb-4'
                            }, '🎯 인사이드잡'),
                            React.createElement('p', {
                                key: 'hero-subtitle',
                                className: 'text-lg md:text-xl text-gray-600 mb-8'
                            }, '현직자와 구직자를 연결하는 취업 멘토링 플랫폼')
                        ]),

                        // 핵심 3개 카드 (플랜비 패턴)
                        React.createElement('div', {
                            key: 'main-features',
                            className: 'grid md:grid-cols-3 gap-8 mb-12'
                        }, [
                            // 1. 취업경쟁력 계산기 (무료 사용 가능)
                            React.createElement('div', {
                                key: 'calculator-card',
                                className: 'card text-center hover:shadow-xl hover:-translate-y-2 transition-all duration-300 cursor-pointer border-2 border-green-200',
                                onClick: () => setCurrentView('calculator')
                            }, [
                                React.createElement('div', {
                                    key: 'calc-icon',
                                    className: 'text-6xl mb-4'
                                }, '🧮'),
                                React.createElement('h3', {
                                    key: 'calc-title',
                                    className: 'text-2xl font-bold text-gray-800 mb-3'
                                }, '취업경쟁력 진단'),
                                React.createElement('p', {
                                    key: 'calc-desc',
                                    className: 'text-gray-600 mb-4 leading-relaxed'
                                }, '6단계 정밀 분석으로 현재 취업 역량을 객관적으로 평가합니다'),
                                React.createElement('div', {
                                    key: 'calc-badge',
                                    className: 'inline-block px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-semibold'
                                }, '🆓 무료 이용'),
                                React.createElement('div', {
                                    key: 'calc-cta',
                                    className: 'mt-4 btn-primary w-full py-3'
                                }, '지금 진단하기')
                            ]),

                            // 2. 구직자 커뮤니티 (로그인 필요)
                            React.createElement('div', {
                                key: 'community-card',
                                className: 'card text-center hover:shadow-xl hover:-translate-y-2 transition-all duration-300 cursor-pointer opacity-75',
                                onClick: () => {
                                    alert('🔐 구직자 커뮤니티는 무료 회원가입 후 이용가능합니다!');
                                    setCurrentView('auth');
                                }
                            }, [
                                React.createElement('div', {
                                    key: 'community-icon',
                                    className: 'text-6xl mb-4'
                                }, '💬'),
                                React.createElement('h3', {
                                    key: 'community-title',
                                    className: 'text-2xl font-bold text-gray-800 mb-3'
                                }, '구직자 커뮤니티'),
                                React.createElement('p', {
                                    key: 'community-desc',
                                    className: 'text-gray-600 mb-4 leading-relaxed'
                                }, '같은 목표를 가진 구직자들과 정보 교환 및 네트워킹'),
                                React.createElement('div', {
                                    key: 'community-badge',
                                    className: 'inline-block px-4 py-2 bg-orange-100 text-orange-700 rounded-full text-sm font-semibold'
                                }, '🔒 로그인 필요'),
                                React.createElement('div', {
                                    key: 'community-cta',
                                    className: 'mt-4 btn-secondary w-full py-3'
                                }, '커뮤니티 참여')
                            ]),

                            // 3. 현직자 멘토링 (로그인 필요)
                            React.createElement('div', {
                                key: 'mentoring-card',
                                className: 'card text-center hover:shadow-xl hover:-translate-y-2 transition-all duration-300 cursor-pointer opacity-75',
                                onClick: () => {
                                    alert('💼 현직자 멘토링은 무료 회원가입 후 이용가능합니다!');
                                    setCurrentView('auth');
                                }
                            }, [
                                React.createElement('div', {
                                    key: 'mentoring-icon',
                                    className: 'text-6xl mb-4'
                                }, '👨‍💼'),
                                React.createElement('h3', {
                                    key: 'mentoring-title',
                                    className: 'text-2xl font-bold text-gray-800 mb-3'
                                }, '현직자 멘토링'),
                                React.createElement('p', {
                                    key: 'mentoring-desc',
                                    className: 'text-gray-600 mb-4 leading-relaxed'
                                }, '10분 단위 유연한 시간으로 실무 중심 1:1 상담'),
                                React.createElement('div', {
                                    key: 'mentoring-badge',
                                    className: 'inline-block px-4 py-2 bg-orange-100 text-orange-700 rounded-full text-sm font-semibold'
                                }, '🔒 로그인 필요'),
                                React.createElement('div', {
                                    key: 'mentoring-cta',
                                    className: 'mt-4 btn-secondary w-full py-3 bg-purple-500 hover:bg-purple-600'
                                }, '상담 예약하기')
                            ])
                        ]),

                        // 전문가 등록 CTA (플랜비 스타일)
                        React.createElement('div', {
                            key: 'expert-cta',
                            className: 'text-center bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-8 border border-blue-200'
                        }, [
                            React.createElement('h2', {
                                key: 'expert-title',
                                className: 'text-2xl font-bold text-gray-800 mb-3'
                            }, '👨‍💼 현직자이신가요?'),
                            React.createElement('p', {
                                key: 'expert-desc',
                                className: 'text-gray-600 mb-6 max-w-2xl mx-auto'
                            }, '후배 구직자들에게 실무 경험을 전수하고 추가 수입을 창출하세요. 10분 단위로 유연하게 상담하고 투명한 수익 정산을 받으실 수 있습니다.'),
                            React.createElement('button', {
                                key: 'expert-btn',
                                className: 'btn-secondary text-lg px-8 py-4 bg-indigo-500 hover:bg-indigo-600',
                                onClick: () => {
                                    alert('현직자 등록은 무료 회원가입 후 가능합니다!');
                                    setCurrentView('auth');
                                }
                            }, '전문가로 참여하기 →')
                        ])
                    ]),

                    // 푸터
                    React.createElement('footer', {
                        key: 'landing-footer',
                        className: 'bg-white border-t mt-16'
                    }, React.createElement('div', {
                        className: 'max-w-7xl mx-auto px-4 py-8 text-center'
                    }, [
                        React.createElement('p', {
                            key: 'copyright',
                            className: 'text-gray-600'
                        }, '© 2025 (주)오픈커넥트. All rights reserved.'),
                        React.createElement('p', {
                            key: 'tech-info',
                            className: 'text-sm text-gray-400 mt-2'
                        }, `플랜비 검증 아키텍처 기반 • Supabase ${connectionStatus === 'connected' ? '연결됨' : '연결 오류'}`)
                    ]))
                ]);
            }

            // 로그인하지 않은 경우
            if (!isAuthenticated) {
                const showAuthModal = currentView === 'auth';
                
                return React.createElement('div', {}, [
                    // 기본 랜딩 화면
                    renderLandingPage(),
                    
                    // 로그인 모달 (조건부 표시)
                    showAuthModal ? renderAuthModal() : null
                ]);
            }

            // 로그인 후 메인 화면 (기존 코드)
            return React.createElement('div', {
                className: 'min-h-screen bg-gradient-to-br from-green-50 to-blue-50'
            }, [
                // 헤더
                React.createElement('header', {
                    key: 'header',
                    className: 'bg-white shadow-sm border-b'
                }, React.createElement('div', {
                    className: 'max-w-7xl mx-auto px-4 py-6'
                }, [
                    React.createElement('div', {
                        key: 'header-content',
                        className: 'flex items-center justify-between'
                    }, [
                        React.createElement('div', {
                            key: 'logo-area',
                            className: 'flex items-center space-x-3'
                        }, [
                            React.createElement('div', {
                                key: 'logo',
                                className: 'text-4xl'
                            }, '🎯'),
                            React.createElement('div', {
                                key: 'title-area'
                            }, [
                                React.createElement('h1', {
                                    key: 'title',
                                    className: 'text-2xl font-bold text-gray-900'
                                }, '인사이드잡'),
                                React.createElement('p', {
                                    key: 'subtitle',
                                    className: 'text-sm text-gray-500'
                                }, 'by (주)오픈커넥트')
                            ])
                        ]),
                        React.createElement('div', {
                            key: 'header-actions',
                            className: 'flex items-center space-x-4'
                        }, [
                            React.createElement('div', {
                                key: 'connection-badge',
                                className: `px-3 py-1 rounded-full text-xs font-medium ${
                                    connectionStatus === 'connected' 
                                    ? 'bg-green-100 text-green-800'
                                    : 'bg-red-100 text-red-800'
                                }`
                            }, connectionStatus === 'connected' ? '✅ 연결됨' : '❌ 연결 오류'),
                            
                            isAuthenticated ? 
                                React.createElement('div', {
                                    key: 'user-menu',
                                    className: 'flex items-center space-x-3'
                                }, [
                                    React.createElement('button', {
                                        key: 'user-greeting',
                                        className: 'text-sm text-gray-600 hover:text-blue-600 font-medium',
                                        onClick: () => setCurrentView('mypage')
                                    }, `안녕하세요, ${currentUser?.user_metadata?.nickname || currentUser?.email || '사용자'}님!`),
                                    React.createElement('button', {
                                        key: 'logout-btn',
                                        className: 'text-sm text-red-600 hover:text-red-800 font-medium',
                                        onClick: handleLogout
                                    }, '로그아웃')
                                ]) :
                                React.createElement('button', {
                                    key: 'login-btn',
                                    className: 'btn-secondary text-sm px-4 py-2',
                                    onClick: () => setCurrentView('auth')
                                }, '로그인')
                        ])
                    ])
                ])),
                
                // 메인 컨텐츠
                React.createElement('main', {
                    key: 'main',
                    className: 'max-w-4xl mx-auto px-4 py-12'
                }, [
                    React.createElement('div', {
                        key: 'hero-section',
                        className: 'text-center mb-12'
                    }, [
                        React.createElement('h2', {
                            key: 'hero-title',
                            className: 'text-4xl font-bold text-gray-900 mb-4'
                        }, '현직자와 구직자를 연결하는'),
                        React.createElement('h3', {
                            key: 'hero-subtitle', 
                            className: 'text-3xl font-bold text-green-600 mb-6'
                        }, '실무 중심 취업 멘토링 플랫폼'),
                        React.createElement('p', {
                            key: 'hero-description',
                            className: 'text-lg text-gray-600 max-w-2xl mx-auto'
                        }, '무료 취업경쟁력 진단부터 현직자 1:1 멘토링까지, 취업 성공을 위한 모든 것')
                    ]),
                    
                    // 기능 카드들
                    React.createElement('div', {
                        key: 'features',
                        className: 'grid md:grid-cols-3 gap-6 mb-12'
                    }, [
                        React.createElement('div', {
                            key: 'feature-1',
                            className: 'card text-center hover:shadow-lg transition-shadow'
                        }, [
                            React.createElement('div', {
                                key: 'icon-1',
                                className: 'text-4xl mb-4'
                            }, '🧮'),
                            React.createElement('h3', {
                                key: 'title-1',
                                className: 'text-xl font-semibold mb-2'
                            }, '취업경쟁력 진단'),
                            React.createElement('p', {
                                key: 'desc-1',
                                className: 'text-gray-600'
                            }, '6단계 정밀 분석으로 현재 역량을 객관적으로 평가')
                        ]),
                        
                        React.createElement('div', {
                            key: 'feature-2',
                            className: 'card text-center hover:shadow-lg transition-shadow cursor-pointer',
                            onClick: () => {
                                if (isAuthenticated) {
                                    setCurrentView('community');
                                } else {
                                    alert('커뮤니티는 회원가입 후 이용가능합니다!');
                                    setCurrentView('auth');
                                }
                            }
                        }, [
                            React.createElement('div', {
                                key: 'icon-2',
                                className: 'text-4xl mb-4'
                            }, '💬'),
                            React.createElement('h3', {
                                key: 'title-2',
                                className: 'text-xl font-semibold mb-2'
                            }, '구직자 커뮤니티'),
                            React.createElement('p', {
                                key: 'desc-2',
                                className: 'text-gray-600'
                            }, '같은 목표를 가진 구직자들과의 정보 교환 및 네트워킹')
                        ]),
                        
                        React.createElement('div', {
                            key: 'feature-3',
                            className: 'card text-center hover:shadow-lg transition-shadow cursor-pointer',
                            onClick: () => {
                                if (isAuthenticated) {
                                    setCurrentView('consultation');
                                } else {
                                    alert('전문가 상담은 회원가입 후 이용가능합니다!');
                                    setCurrentView('auth');
                                }
                            }
                        }, [
                            React.createElement('div', {
                                key: 'icon-3',
                                className: 'text-4xl mb-4'
                            }, '👨‍💼'),
                            React.createElement('h3', {
                                key: 'title-3',
                                className: 'text-xl font-semibold mb-2'
                            }, '현직자 멘토링'),
                            React.createElement('p', {
                                key: 'desc-3',
                                className: 'text-gray-600'
                            }, '10분 단위 유연한 시간으로 실무 중심 1:1 상담')
                        ])
                    ]),
                    
                    // CTA 버튼들
                    React.createElement('div', {
                        key: 'cta-section',
                        className: 'text-center space-y-4'
                    }, [
                        React.createElement('button', {
                            key: 'start-btn',
                            className: 'btn-primary text-lg px-8 py-4 mr-4',
                            onClick: () => setCurrentView('calculator')
                        }, '🧮 취업경쟁력 진단 시작'),
                        
                        React.createElement('button', {
                            key: 'expert-btn', 
                            className: 'btn-secondary text-lg px-8 py-4',
                            onClick: () => alert('현직자 등록 시스템 개발 예정! 💼')
                        }, '👨‍💼 현직자로 참여하기')
                    ]),
                    
                    // 사용자 역할별 추가 메뉴 (로그인 후에만 표시)
                    isAuthenticated ? React.createElement('div', {
                        key: 'user-menu-section',
                        className: 'mt-16 pt-8 border-t border-gray-200'
                    }, [
                        React.createElement('h3', {
                            key: 'menu-title',
                            className: 'text-2xl font-bold text-gray-900 text-center mb-8'
                        }, '🎯 개인 맞춤 서비스'),
                        
                        React.createElement('div', {
                            key: 'user-features',
                            className: 'grid md:grid-cols-2 lg:grid-cols-4 gap-4'
                        }, [
                            // 모든 사용자 공통 - 마이페이지
                            React.createElement('div', {
                                key: 'mypage-card',
                                className: 'card text-center hover:shadow-lg transition-shadow cursor-pointer',
                                onClick: () => setCurrentView('mypage')
                            }, [
                                React.createElement('div', {
                                    key: 'mypage-icon',
                                    className: 'text-3xl mb-3'
                                }, '👤'),
                                React.createElement('h4', {
                                    key: 'mypage-title',
                                    className: 'font-semibold mb-2'
                                }, '마이페이지'),
                                React.createElement('p', {
                                    key: 'mypage-desc',
                                    className: 'text-sm text-gray-600'
                                }, '프로필 및 활동 관리')
                            ]),
                            
                            // 일반회원/전문가 공통 - 쪽지
                            ['member', 'expert'].includes(userRole) ? React.createElement('div', {
                                key: 'messages-card',
                                className: 'card text-center hover:shadow-lg transition-shadow cursor-pointer',
                                onClick: () => setCurrentView('messages')
                            }, [
                                React.createElement('div', {
                                    key: 'messages-icon',
                                    className: 'text-3xl mb-3'
                                }, '📩'),
                                React.createElement('h4', {
                                    key: 'messages-title',
                                    className: 'font-semibold mb-2'
                                }, '쪽지'),
                                React.createElement('p', {
                                    key: 'messages-desc',
                                    className: 'text-sm text-gray-600'
                                }, '회원 간 메시지 교환')
                            ]) : null,
                            
                            // 전문가 전용 메뉴
                            userRole === 'expert' ? React.createElement('div', {
                                key: 'expert-dashboard-card',
                                className: 'card text-center hover:shadow-lg transition-shadow cursor-pointer',
                                onClick: () => alert('전문가 대시보드 개발 예정!')
                            }, [
                                React.createElement('div', {
                                    key: 'expert-icon',
                                    className: 'text-3xl mb-3'
                                }, '👨‍💼'),
                                React.createElement('h4', {
                                    key: 'expert-title',
                                    className: 'font-semibold mb-2'
                                }, '상담 관리'),
                                React.createElement('p', {
                                    key: 'expert-desc',
                                    className: 'text-sm text-gray-600'
                                }, '예약 및 수익 관리')
                            ]) : null,
                            
                            // 관리자 전용 메뉴
                            userRole === 'admin' ? React.createElement('div', {
                                key: 'admin-panel-card',
                                className: 'card text-center hover:shadow-lg transition-shadow cursor-pointer bg-red-50 border-red-200',
                                onClick: () => setCurrentView('admin')
                            }, [
                                React.createElement('div', {
                                    key: 'admin-icon',
                                    className: 'text-3xl mb-3'
                                }, '🔧'),
                                React.createElement('h4', {
                                    key: 'admin-title',
                                    className: 'font-semibold mb-2 text-red-800'
                                }, '관리자 패널'),
                                React.createElement('p', {
                                    key: 'admin-desc',
                                    className: 'text-sm text-red-600'
                                }, '시스템 설정 및 관리')
                            ]) : null
                        ].filter(Boolean)) // null 값 제거
                    ]) : null
                ]),
                
                // 푸터
                React.createElement('footer', {
                    key: 'footer',
                    className: 'bg-white border-t mt-16'
                }, React.createElement('div', {
                    className: 'max-w-7xl mx-auto px-4 py-8 text-center'
                }, [
                    React.createElement('p', {
                        key: 'copyright',
                        className: 'text-gray-600'
                    }, '© 2025 (주)오픈커넥트. All rights reserved.'),
                    React.createElement('p', {
                        key: 'tech-info',
                        className: 'text-sm text-gray-400 mt-2'
                    }, `플랜비 검증 아키텍처 기반 • Supabase ${connectionStatus === 'connected' ? '연결됨' : '연결 오류'}`)
                ]))
            ]);
        };

        // 실시간 채팅 시스템 (전문가 상담 전용)
        const renderConsultationChatView = (bookingId) => {
            const [messages, setMessages] = React.useState([]);
            const [newMessage, setNewMessage] = React.useState('');
            const [chatRoom, setChatRoom] = React.useState(null);
            const [isLoading, setIsLoading] = React.useState(true);
            const [participants, setParticipants] = React.useState([]);
            const messagesEndRef = React.useRef(null);

            // 채팅방 생성 또는 가져오기
            React.useEffect(() => {
                const initializeChatRoom = async () => {
                    try {
                        // 기존 채팅방 확인
                        const { data: existingRoom, error: roomError } = await supabaseClient
                            .from('chat_rooms')
                            .select('*')
                            .eq('name', `상담 ${bookingId}`)
                            .eq('room_type', 'consultation')
                            .single();

                        let room;
                        if (existingRoom) {
                            room = existingRoom;
                        } else {
                            // 새 채팅방 생성
                            const { data: newRoom, error: createError } = await supabaseClient
                                .from('chat_rooms')
                                .insert({
                                    name: `상담 ${bookingId}`,
                                    description: '전문가 상담 채팅방',
                                    room_type: 'consultation',
                                    created_by: currentUser?.id
                                })
                                .select()
                                .single();

                            if (createError) throw createError;
                            room = newRoom;
                        }

                        setChatRoom(room);

                        // 채팅방 참여자 등록
                        const { error: participantError } = await supabaseClient
                            .from('chat_participants')
                            .upsert({
                                room_id: room.id,
                                user_id: currentUser?.id,
                                is_active: true
                            });

                        if (participantError) console.error('Participant error:', participantError);

                        // 기존 메시지 로드
                        const { data: existingMessages, error: messagesError } = await supabaseClient
                            .from('chat_messages')
                            .select(`
                                *,
                                user_profiles!inner(nickname)
                            `)
                            .eq('room_id', room.id)
                            .order('created_at', { ascending: true });

                        if (!messagesError && existingMessages) {
                            setMessages(existingMessages);
                        }

                        setIsLoading(false);
                    } catch (error) {
                        console.error('Chat room initialization error:', error);
                        setIsLoading(false);
                    }
                };

                if (bookingId && currentUser) {
                    initializeChatRoom();
                }
            }, [bookingId, currentUser]);

            // 실시간 메시지 구독
            React.useEffect(() => {
                if (!chatRoom) return;

                const subscription = supabaseClient
                    .channel(`chat-room-${chatRoom.id}`)
                    .on('postgres_changes', {
                        event: 'INSERT',
                        schema: 'public',
                        table: 'chat_messages',
                        filter: `room_id=eq.${chatRoom.id}`
                    }, async (payload) => {
                        // 새 메시지에 사용자 정보 추가
                        const { data: userInfo } = await supabaseClient
                            .from('user_profiles')
                            .select('nickname')
                            .eq('user_id', payload.new.user_id)
                            .single();

                        const messageWithUser = {
                            ...payload.new,
                            user_profiles: userInfo || { nickname: '익명' }
                        };

                        setMessages(prev => [...prev, messageWithUser]);
                    })
                    .subscribe();

                return () => {
                    supabaseClient.removeChannel(subscription);
                };
            }, [chatRoom]);

            // 자동 스크롤
            React.useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [messages]);

            // 메시지 전송
            const handleSendMessage = async () => {
                if (!newMessage.trim() || !chatRoom) return;

                try {
                    const { error } = await supabaseClient
                        .from('chat_messages')
                        .insert({
                            room_id: chatRoom.id,
                            user_id: currentUser?.id,
                            message_text: newMessage.trim(),
                            message_type: 'text'
                        });

                    if (error) throw error;
                    setNewMessage('');
                } catch (error) {
                    console.error('Message send error:', error);
                    alert('메시지 전송에 실패했습니다.');
                }
            };

            // 엔터 키로 전송
            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSendMessage();
                }
            };

            if (isLoading) {
                return React.createElement('div', {
                    className: 'flex items-center justify-center h-96'
                }, [
                    React.createElement('div', {
                        key: 'spinner',
                        className: 'loading-spinner'
                    }),
                    React.createElement('div', {
                        key: 'text',
                        className: 'ml-4 text-gray-600'
                    }, '채팅방 연결 중...')
                ]);
            }

            return React.createElement('div', {
                className: 'max-w-4xl mx-auto p-4'
            }, [
                React.createElement('div', {
                    key: 'header',
                    className: 'card mb-4'
                }, [
                    React.createElement('div', {
                        key: 'chat-header',
                        className: 'flex items-center justify-between'
                    }, [
                        React.createElement('div', {
                            key: 'title-section'
                        }, [
                            React.createElement('h2', {
                                key: 'title',
                                className: 'text-2xl font-bold text-gray-800'
                            }, '💬 실시간 상담 채팅'),
                            React.createElement('p', {
                                key: 'subtitle',
                                className: 'text-gray-600 text-sm'
                            }, `상담 ID: ${bookingId}`)
                        ]),
                        React.createElement('div', {
                            key: 'status',
                            className: 'flex items-center'
                        }, [
                            React.createElement('div', {
                                key: 'online-indicator',
                                className: 'w-3 h-3 bg-green-500 rounded-full mr-2'
                            }),
                            React.createElement('span', {
                                key: 'status-text',
                                className: 'text-sm text-green-600 font-medium'
                            }, '실시간 연결')
                        ])
                    ])
                ]),

                React.createElement('div', {
                    key: 'chat-container',
                    className: 'card'
                }, [
                    // 메시지 목록
                    React.createElement('div', {
                        key: 'messages-area',
                        className: 'h-96 overflow-y-auto border border-gray-200 rounded-lg p-4 bg-gray-50 mb-4',
                        style: { maxHeight: '400px' }
                    }, [
                        ...messages.map(message => 
                            React.createElement('div', {
                                key: message.id,
                                className: `mb-4 ${message.user_id === currentUser?.id ? 'text-right' : 'text-left'}`
                            }, [
                                React.createElement('div', {
                                    key: 'message-bubble',
                                    className: `inline-block max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${
                                        message.user_id === currentUser?.id
                                            ? 'bg-blue-500 text-white'
                                            : 'bg-white text-gray-800 shadow-md'
                                    }`
                                }, message.message_text),
                                React.createElement('div', {
                                    key: 'message-info',
                                    className: 'text-xs text-gray-500 mt-1'
                                }, [
                                    React.createElement('span', {
                                        key: 'author'
                                    }, message.user_profiles?.nickname || '익명'),
                                    React.createElement('span', {
                                        key: 'time',
                                        className: 'ml-2'
                                    }, new Date(message.created_at).toLocaleTimeString())
                                ])
                            ])
                        ),
                        React.createElement('div', {
                            key: 'messages-end',
                            ref: messagesEndRef
                        })
                    ]),

                    // 메시지 입력 영역
                    React.createElement('div', {
                        key: 'input-area',
                        className: 'flex space-x-3'
                    }, [
                        React.createElement('textarea', {
                            key: 'message-input',
                            value: newMessage,
                            onChange: (e) => setNewMessage(e.target.value),
                            onKeyPress: handleKeyPress,
                            placeholder: '메시지를 입력하세요... (Enter: 전송, Shift+Enter: 줄바꿈)',
                            className: 'flex-1 px-4 py-3 border border-gray-300 rounded-lg resize-none text-base',
                            rows: 2
                        }),
                        React.createElement('button', {
                            key: 'send-button',
                            onClick: handleSendMessage,
                            disabled: !newMessage.trim(),
                            className: 'btn-primary px-6 py-3 disabled:opacity-50 disabled:cursor-not-allowed'
                        }, '전송')
                    ])
                ]),

                React.createElement('div', {
                    key: 'chat-footer',
                    className: 'mt-6 text-center'
                }, [
                    React.createElement('button', {
                        key: 'back-btn',
                        className: 'btn-secondary mr-4',
                        onClick: () => setCurrentView('consultation')
                    }, '← 상담 목록으로'),
                    React.createElement('button', {
                        key: 'end-chat-btn',
                        className: 'btn-secondary bg-red-500 hover:bg-red-600',
                        onClick: () => {
                            if (confirm('채팅을 종료하시겠습니까?')) {
                                setCurrentView('consultation');
                            }
                        }
                    }, '채팅 종료')
                ])
            ]);
        };

        // 채팅방 입장 함수
        const enterConsultationChat = (bookingId) => {
            setCurrentView('consultation-chat');
            setSelectedBooking(bookingId);
        };

        // 앱 렌더링
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(InsideJobApp));
        
        // 개발 편의를 위한 전역 함수
        window.supabase = supabaseClient;
        window.testConnection = async () => {
            try {
                console.log('Supabase Client:', supabaseClient);
                console.log('URL:', SUPABASE_URL);
                console.log('연결 상태: 정상');
            } catch (error) {
                console.log('연결 오류:', error);
            }
        };
        
        console.log('🎯 인사이드잡 플랫폼 시작!');
        console.log('개발자 도구에서 window.testConnection() 으로 Supabase 연결을 테스트하세요.');
    </script>
</body>
</html>